webpackJsonp([9],{"196n":function(t,e,n){"use strict";var i={props:{text:{type:String,default:"是否要清空历史"},confirmText:{type:String,default:"清空"},cancelText:{type:String,default:"取消"}},data:function(){return{showConfirm:!1}},methods:{show:function(){this.showConfirm=!0},hide:function(){this.showConfirm=!1},confirm:function(){this.hide(),this.$emit("confirm")},cancel:function(){this.hide(),this.$emit("cancel")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"confirm-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfirm,expression:"showConfirm"}],staticClass:"confirm",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"confirm-wrapper"},[n("div",{staticClass:"confirm-content"},[n("p",{staticClass:"text"},[t._v(t._s(t.text))]),t._v(" "),n("div",{staticClass:"operator"},[n("div",{staticClass:"btn left",on:{click:t.confirm}},[t._v(t._s(t.confirmText))]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.cancel}},[t._v(t._s(t.cancelText))])])])])])])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("vZ6m")},"data-v-49495e0e",null).exports;e.a=r},"1jO5":function(t,e){},"422T":function(t,e){},"5b1l":function(t,e,n){"use strict";var i={props:{placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},methods:{clearBox:function(){this.query=""},setQuery:function(t){this.query=t},blur:function(){"box"===document.activeElement.className&&this.$refs.query.blur()}},watch:{query:function(t){this.$emit("query",t)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-box"},[n("span",{staticClass:"iconfont icon-soushuo"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"query",staticClass:"box",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),n("span",{class:["iconfont","icon-quxiao",{nocancel:!t.query}],on:{click:t.clearBox}})])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("f//3")},"data-v-241994b5",null).exports;e.a=r},"8stH":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var i=n("//Fk"),s=n.n(i),r=n("gyMJ"),a=function(){return new s.a(function(t,e){Object(r.b)("/hotkey").then(function(e){t(e.data)},function(t){e(t)})})},o=function(t,e){return new s.a(function(n,i){Object(r.b)("/searching",{query:t,page:e}).then(function(t){n(t.data)},function(t){i(t)})})}},B6Z8:function(t,e){},IHeY:function(t,e,n){"use strict";var i=n("Vqun"),s=n("e5RB"),r={mixins:[n("is1l").c],props:{songs:{type:Array,default:function(){return[]}},rank:{type:Boolean,default:!1},more:{type:Boolean,default:!1},resetTop:{type:Boolean,default:!1}},data:function(){return{scrollY:0,transY:0,blurpx:0,scalepx:0,isLoading:!1}},mounted:function(){this.resetTop&&(this.$refs.songlist.style.top="0")},methods:{handlePlaylist:function(){this.playlistLength?this.$refs.songlist.style.bottom="3rem":this.$refs.songlist.style.bottom="",this.$refs.scrollWrapper.refresh()},getMoreSong:function(){this.isLoading=!0,this.$emit("getmore")},selectSong:function(t,e){this.$emit("selectSong",t,e)},getDesc:function(t){var e="";if(t.singer)return t.singer.forEach(function(t,n){0===n?e=t.name:e+="/"+t.name}),e+". "+t.album},handleScroll:function(t){this.scrollY=t.y},getRankClass:function(t){return t<=2?"icon"+t:"icons"},refresh:function(){this.$refs.scrollWrapper.refresh()}},watch:{scrollY:function(t){var e=t<-220?-220:t>60?60:t;if(e!==this.transY){this.$refs.bglayer.style.transform="translate3d(0, "+e+"px, 0)",this.transY=e;var n=parseInt(e/20),i=e/200+1;this.blurpx!==n&&n<=0&&(this.blurpx=n,this.$emit("blurimg",n)),e>0&&this.scalepx!==i&&(this.scalepx=i,this.$emit("scaleimg",i))}},songs:function(){var t=this;this.isLoading=!1,this.$nextTick(function(){t.$refs.scrollWrapper.refresh()})}},components:{Scroll:i.a,Loading:s.a}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"songlist",staticClass:"songlist"},[n("div",{ref:"bglayer",staticClass:"bglayer"}),t._v(" "),n("Scroll",{ref:"scrollWrapper",staticClass:"scroll-wrapper",attrs:{data:t.songs,probeType:3,listenScroll:!0},on:{scrolling:t.handleScroll}},[n("ul",[t._l(t.songs,function(e,i){return n("li",{key:e.id,staticClass:"item",on:{click:function(n){t.selectSong(e,i)}}},[t.rank?n("div",{class:["num",t.getRankClass(i)]},[t._v(t._s(i+1))]):t._e(),t._v(" "),n("div",{staticClass:"txt"},[n("h4",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.getDesc(e)))])])])}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:t.more&&t.songs.length,expression:"more && songs.length"}],staticClass:"item"},[n("p",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"more",on:{click:function(e){return e.stopPropagation(),t.getMoreSong(e)}}},[t._v("加载更多")]),t._v(" "),n("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{mini:!0}})],1)],2)])],1)},staticRenderFns:[]};var o=n("VU/8")(r,a,!1,function(t){n("ndNT")},"data-v-47d6f060",null).exports;e.a=o},IYFq:function(t,e){},"M4y/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/5sW"),s=n("Dd8w"),r=n.n(s),a=n("Xxa5"),o=n.n(a),c=n("exGp"),l=n.n(c),u=n("Vqun"),h={props:{percent:{type:Number,default:0}},data:function(){return{dasharray:50*Math.PI}},methods:{clickHandler:function(){this.$emit("svgclicked")}},computed:{dashoffset:function(){return(1-this.percent)*this.dasharray}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-circle",on:{click:function(e){return e.stopPropagation(),t.clickHandler(e)}}},[n("svg",{attrs:{height:"28",width:"27",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[n("circle",{staticClass:"circle-all",attrs:{cx:"25",cy:"25",r:"23",stroke:"#d7f3fc","stroke-width":"4",fill:"transparent"}}),t._v(" "),n("circle",{staticClass:"circle-pro",attrs:{cx:"25",cy:"25",r:"23",stroke:"steelblue","stroke-width":"4",fill:"transparent","stroke-dasharray":t.dasharray,"stroke-dashoffset":t.dashoffset}})]),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var f=n("VU/8")(h,d,!1,function(t){n("W54a")},"data-v-dabb29e6",null).exports,p={data:function(){return{initiated:!1,touch:{},newPercent:0}},props:{percent:{type:Number,default:0}},methods:{proTouchStart:function(t){this.initiated=!0,this.touch.startX=t.touches[0].pageX,this.offsetLeft=this.$refs.proAll.getBoundingClientRect().left,this.totalWidth=this.$refs.proAll.clientWidth,this.newPercent=(this.touch.startX-this.offsetLeft)/this.totalWidth,this.getProgress(this.newPercent)},proTouchMove:function(t){if(this.initiated){var e=(t.touches[0].pageX-this.offsetLeft)/this.totalWidth;this.newPercent=Math.min(1,Math.max(0,e)),this.getProgress(this.newPercent)}},proTouchEnd:function(){this.initiated=!1,this.$emit("changepercent",this.newPercent)},getProgress:function(t){var e=(100*t).toFixed(1);this.$refs.proNow.style.width=e+"%"}},watch:{percent:function(t){t>0&&!this.initiated&&this.getProgress(t)}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar"},[n("div",{ref:"proAll",staticClass:"progress-all",on:{touchstart:function(e){return e.preventDefault(),t.proTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.proTouchMove(e)},touchend:t.proTouchEnd}},[n("div",{ref:"proNow",staticClass:"progress-now"},[n("div",{staticClass:"progress-btn"})])])])])},staticRenderFns:[]};var v=n("VU/8")(p,m,!1,function(t){n("wGV7")},"data-v-6ed9ac31",null).exports,g={props:{precent:{type:Number,default:50}},data:function(){return{isInitialed:!1,touch:{},newPercent:50,timer:null,volbarShow:!1}},mounted:function(){this.setVolHeight(this.precent)},methods:{toggleBarShow:function(){this.volbarShow=!this.volbarShow},handleHoverBarShow:function(t){var e=this;t?clearTimeout(this.timer):this.timer=setTimeout(function(){e.volbarShow=!1},2500)},vTouchStart:function(t){this.handleHoverBarShow(!0),this.isInitialed=!0,this.touch.startY=t.touches[0].pageY,this.offsetTop=this.$refs.volAll.getBoundingClientRect().top,this.touch.heightAll=100,this.newPercent=this.touch.heightAll-(this.touch.startY-this.offsetTop),this.setVolHeight(this.newPercent)},vTouchMove:function(t){if(this.isInitialed){var e=this.touch.heightAll-(t.touches[0].pageY-this.offsetTop);e=Math.max(0,Math.min(100,e)),this.newPercent!==e&&(this.newPercent=e,this.setVolHeight(e))}},vTouchEnd:function(){this.isInitialed=!1,this.handleHoverBarShow()},setVolHeight:function(t){this.$refs.volNow.style.height=t+"%",this.$emit("volume",t)}},computed:{volumnIcon:function(){return 0===this.newPercent?"icon-shengyinjingyinmianxing":"icon-shengyinyinliangmianxing"}},watch:{volbarShow:function(t){var e=this;t&&(clearTimeout(this.timer),this.timer=setTimeout(function(){e.volbarShow=!1},2500))}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"volume"},[n("transition",{attrs:{name:"vol"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.volbarShow,expression:"volbarShow"}],staticClass:"volume-bar"},[n("div",{ref:"volAll",staticClass:"volume-all",on:{touchstart:function(e){return e.preventDefault(),t.vTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.vTouchMove(e)},touchend:t.vTouchEnd}},[n("div",{ref:"volNow",staticClass:"volume-now"},[n("div",{staticClass:"volume-btn"})])])])]),t._v(" "),n("span",{class:["iconfont",t.volumnIcon],on:{click:t.toggleBarShow}})],1)},staticRenderFns:[]};var S=n("VU/8")(g,y,!1,function(t){n("422T")},"data-v-74170be6",null).exports,_=n("196n"),w=n("is1l"),T=n("NYxO"),E=n("W/7t"),C=n("IHeY"),x=n("bqM4"),L=n("kaUw"),b={props:{delay:{type:Number,default:2e3}},data:function(){return{showFlag:!1,timer:null}},methods:{show:function(){var t=this;this.showFlag=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){t.showFlag=!1},this.delay)},hide:function(){this.showFlag=!1}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toptip"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"toptip",on:{click:function(e){return e.stopPropagation(),t.hide(e)}}},[t._t("default")],2)])},staticRenderFns:[]};var P=n("VU/8")(b,I,!1,function(t){n("Qm0G")},"data-v-19ce2934",null).exports,k=n("5b1l"),$=n("dyme"),N={mixins:[w.d],data:function(){return{showFlag:!1,query:"",queryShow:!1,showPlayHis:!0}},methods:r()({showToptip:function(){this.$refs.toptip.show()},switchPage:function(t){var e=this;0===t?this.showPlayHis=!0:(this.showPlayHis=!1,this.$nextTick(function(){e.$refs.searchlist.refresh()}))},refresh:function(){this.$refs.songlist.refresh()},show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1},selectItem:function(){this.hide(),this.$emit("selectedsong"),this.saveSearchHistory(this.query),this.showToptip()},selectHistorySong:function(t,e){0!==e&&(this.insertSong(t),this.showToptip())}},Object(T.b)(["insertSong"])),computed:r()({},Object(T.c)(["playHistory","searchHistory"])),components:{SearchBox:k.a,Suggest:L.a,Switches:$.a,Songlist:C.a,SearchList:x.a,Toptip:P}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"addsong"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"add-song",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"header"},[n("span",{staticClass:"iconfont icon-cha",on:{click:t.hide}}),t._v(" "),n("p",{staticClass:"title"},[t._v("添加歌曲到列表")])]),t._v(" "),n("div",{staticClass:"search-box-wrapper"},[n("SearchBox",{ref:"searchBox",attrs:{placeholder:"收索歌曲"},on:{query:t.queryChange}})],1),t._v(" "),n("Switches",{directives:[{name:"show",rawName:"v-show",value:!t.queryShow,expression:"!queryShow"}],staticClass:"toggle",attrs:{datas:["最近播放","搜索历史"]},on:{switch:t.switchPage}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.queryShow,expression:"!queryShow"}],staticClass:"shortcut"},[n("transition-group",{attrs:{name:"slide-in"}},[n("Songlist",{directives:[{name:"show",rawName:"v-show",value:t.showPlayHis,expression:"showPlayHis"}],key:1,ref:"songlist",attrs:{songs:t.playHistory,music:!1,resetTop:!0},on:{selectSong:t.selectHistorySong}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showPlayHis,expression:"!showPlayHis"}],key:2,staticClass:"searchlist"},[n("SearchList",{ref:"searchlist",attrs:{dataList:t.searchHistory,addSong:!0},on:{deleted:t.deleteHistory,selected:t.addQuery}})],1)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.query&&t.queryShow,expression:"query && queryShow"}],staticClass:"search"},[n("Suggest",{attrs:{query:t.query,addSong:!0,showSinger:!1},on:{selected:t.selectItem,listScroll:t.listScroll}})],1),t._v(" "),n("Toptip",{ref:"toptip"},[n("div",{staticClass:"top-tip",staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("span",{staticClass:"iconfont icon-dui",staticStyle:{padding:"0 .3rem"}}),t._v(" "),n("p",{staticClass:"text"},[t._v("歌曲已添加到列表")])])])],1)])},staticRenderFns:[]};var A=n("VU/8")(N,R,!1,function(t){n("aiI6")},"data-v-6b59b1d4",null).exports,q={mixins:[w.a,w.b],data:function(){return{showFlag:!1}},methods:r()({addSong:function(){var t=this;this.$refs.addsong.show(),this.$nextTick(function(){t.$refs.addsong.refresh()})},deleteAll:function(){this.deleteSongList(),this.hide()},confrimDelAll:function(){this.$refs.confirm.show()},deleteOne:function(t){this.deleteSong(t),this.playList.length||this.hide()},scrollToCurrentEl:function(t){var e=this.sequenceList.findIndex(function(e){return e.id===t.id});this.$refs.scroll.scrollToElement(this.$refs.songsList[e],300)},selectItem:function(t,e){this.mode===E.a.random&&(e=this.playList.findIndex(function(e){return e.id===t.id})),this.setCurrentIndex(e),this.setPlayState(!0)},show:function(){var t=this;this.showFlag=!0,this.$nextTick(function(){t.$refs.scroll.refresh()})},hide:function(){this.showFlag=!1},isCurrentSong:function(t){return this.currentSong.id===t.id}},Object(T.d)({setCurrentIndex:"SET_CURRENTINDEX",setPlayState:"SET_PLAYING_STATE",SET_PLAY_MODE:"SET_PLAY_MODE",SET_CURRENTINDEX:"SET_CURRENTINDEX",SET_PLAYLIST:"SET_PLAYLIST"}),Object(T.b)(["deleteSong","deleteSongList"])),computed:r()({},Object(T.c)(["sequenceList","currentSong","mode","playList"]),{getModeTxt:function(){switch(this.mode){case E.a.sequence:return"队列播放";case E.a.loop:return"单曲循环";case E.a.random:return"随机播放"}},getModeIcon:function(){switch(this.mode){case E.a.sequence:return"icon-ttpodicon2";case E.a.loop:return"icon-danquxunhuan";case E.a.random:return"icon-icon-test"}}}),watch:{currentSong:function(t,e){this.showFlag&&(this.newSong&&this.oldSong.id&&this.newSong.id!==this.oldSong.id||this.scrollToCurrentEl(t))}},components:{Scroll:u.a,Confirm:_.a,AddSong:A}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"playlist-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"playlist",on:{click:t.hide}},[n("div",{ref:"listWrap",staticClass:"list-wrapper",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"list-header"},[n("span",{class:["iconfont",t.getModeIcon],on:{click:function(e){return e.stopPropagation(),t.changeMode(e)}}}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(t.getModeTxt))]),t._v(" "),n("span",{staticClass:"iconfont icon-lajitong",on:{click:function(e){return e.stopPropagation(),t.confrimDelAll(e)}}})]),t._v(" "),n("div",{staticClass:"list-content"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.sequenceList}},[n("transition-group",{attrs:{name:"list",tag:"ul"}},t._l(t.sequenceList,function(e,i){return n("li",{key:e.id,ref:"songsList",refInFor:!0,staticClass:"item",on:{click:function(n){t.selectItem(e,i)}}},[n("span",{class:["iconfont","icon-yinle",{currentIcon:t.isCurrentSong(e)}]}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(e.name))]),t._v(" "),n("span",{class:["iconfont",t.getFavIcon(e)],on:{click:function(n){n.stopPropagation(),t.toggleFavState(e)}}}),t._v(" "),n("span",{staticClass:"iconfont icon-cha",on:{click:function(n){n.stopPropagation(),t.deleteOne(e)}}})])}))],1)],1),t._v(" "),n("div",{staticClass:"list-operator"},[n("div",{staticClass:"add",on:{click:function(e){return e.stopPropagation(),t.addSong(e)}}},[n("span",{staticClass:"iconfont icon-yinle"}),t._v(" "),n("span",[t._v("添加歌曲到队列")])])]),t._v(" "),n("div",{staticClass:"close",on:{click:t.hide}},[n("span",[t._v("关闭")])])]),t._v(" "),n("Confirm",{ref:"confirm",attrs:{text:"是否清空播放列表"},on:{confirm:t.deleteAll}}),t._v(" "),n("AddSong",{ref:"addsong",on:{selectedsong:t.hide}})],1)])},staticRenderFns:[]};var Y=n("VU/8")(q,F,!1,function(t){n("X62J")},"data-v-4f857460",null).exports,O=n("OKJt"),H=n.n(O),U=n("//Fk"),M=n.n(U),D=n("gyMJ"),W=function(t){return new M.a(function(e,n){Object(D.b)("/lyric",{mid:t}).then(function(t){e(t.data)},function(t){n(t)})})},X=n("x8dC"),j={mixins:[w.b],data:function(){return{songReady:!1,currentTime:0,currentLyric:{},currentLrcLine:0,lycPageShow:!1,touch:{},volumnIcon:"icon-shengyinyinliangmianxing",firstInPlayer:!0}},methods:r()({changeVolume:function(t){this.$refs.audio&&(t=Math.max(0,Math.min(100,t/100)),this.$refs.audio.volume=t)},midStartTouch:function(t){this.touch.initaited=!0;var e=t.touches[0];this.touch.startX=e.pageX,this.touch.startY=e.pageY},midTouchMove:function(t){if(this.touch.initaited){var e=t.touches[0],n=e.pageX-this.touch.startX,i=e.pageY-this.touch.startY;Math.abs(i)>Math.abs(n)||(!this.lycPageShow&&n<0&&(this.transPage(n),this.touch.deltaX=n),this.lycPageShow&&n>0&&(this.transPage(n-window.innerWidth),this.touch.deltaX=n))}},midEndTouch:function(){this.touch.initaited=!1,this.touch.deltaX<-window.innerWidth/3?(this.lycPageShow=!0,this.transPage(-window.innerWidth,!0)):this.touch.deltaX<0&&this.transPage(0,!0),this.touch.deltaX>window.innerWidth/3?(this.lycPageShow=!1,this.transPage(0,!0)):this.touch.deltaX>0&&this.transPage(-window.innerWidth,!0)},transPage:function(t,e){e||(this.$refs.midLeft.style.transition="",this.$refs.midRight.style.transition=""),this.$refs.midLeft.style.transform="translateX("+t+"px)",this.$refs.midRight.style.transform="translateX("+t+"px)",e&&(this.$refs.midLeft.style.transition="all .5s",this.$refs.midRight.style.transition="all .5s")},getLrc:function(){var t=this;return l()(o.a.mark(function e(){var n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t.currentSong.mid);case 2:if(n=e.sent,i=t.currentSong.name.replace(/\(.+\)/g,""),new RegExp("ti:"+i).test(n)){e.next=9;break}return t.currentLyric={lines:[{time:0,txt:"此歌曲为没有填词的纯音乐，请您欣赏"}]},t.currentLrcLine=0,e.abrupt("return");case 9:n&&(t.currentLyric=new H.a(n,t.handlerLyric)),t.playingState&&t.currentLyric.play();case 11:case"end":return e.stop()}},e,t)}))()},handlerLyric:function(t){var e=t.lineNum;t.txt;if(this.currentLrcLine=e,e>5){var n=this.$refs.lyricEles[e-5];this.$refs.lyricScroll&&this.$refs.lyricScroll.scrollToElement(n,1e3)}else this.$refs.lyricScroll.scrollTo(0,0,1e3)},changeMode:function(){var t=(this.mode+1)%3;this.SET_PLAY_MODE(t);var e=null;e=t===E.a.random?Object(X.a)(this.sequenceList):this.sequenceList,this.resetCurrentIndex(e),this.SET_PLAYLIST(e)},resetCurrentIndex:function(t){var e=this,n=t.findIndex(function(t){return t.id===e.currentSong.id});this.SET_CURRENTINDEX(n)},changeProgress:function(t){var e=t*this.currentSong.duration;this.$refs.audio.currentTime=e,this.currentLyric.seek&&this.currentLyric.seek(1e3*e),this.playingState||this.toggleState()},nextSong:function(){if(this.songReady)if(1===this.playList.length)this.loop();else{var t=this.currentIndex+1;t===this.playList.length&&(t=0),this.SET_CURRENTINDEX(t),this.playingState||this.toggleState(),this.songReady=!1}},prevSong:function(){if(this.songReady)if(1===this.playList.length)this.loop();else{var t=this.currentIndex-1;-1===t&&(t=this.playList.length-1),this.SET_CURRENTINDEX(t),this.playingState||this.toggleState(),this.songReady=!1}},toggleState:function(){if(!this.songReady)return this.$refs.audio.load(),void(this.currentLyric.seek&&(this.currentLyric.seek(0),this.currentLyric.togglePlay()));this.SET_PLAYING_STATE(!this.playingState),this.currentLyric.togglePlay&&this.currentLyric.togglePlay()},end:function(){this.mode===E.a.loop?this.loop():this.nextSong()},error:function(){},ready:function(){this.firstInPlayer&&(this.SET_PLAYING_STATE(!0),this.firstInPlayer=!1),this.songReady=!0,this.savePlayHistory(this.currentSong)},loop:function(){this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.currentLyric.seek&&this.currentLyric.seek(0)},timeUpdate:function(t){this.currentTime=t.target.currentTime},pickUpPlayer:function(){this.SET_FULLSCREEN(!1)},unfoldPlayer:function(){this.SET_FULLSCREEN(!0)},enter:function(t,e){if(t.addEventListener("transitionend",e),!this.flag)return this.position=this.getPosAndScale(),this.flag=!0,this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(0.2)",void(this.$refs.cdWrapper.style.opacity="0");this.$refs.cdWrapper.style.transform="translate3d("+this.position.offsetX+"px, "+this.position.offsetY+"px, 0) scale("+this.position.scale+")"},afterEnter:function(){this.$refs.cdWrapper.style.transition="all .5s",this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(1)",this.$refs.cdWrapper.style.opacity="1"},beforeLeave:function(){this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(1)"},leave:function(t,e){t.addEventListener("transitionend",e);var n=this.position,i=n.offsetX,s=n.offsetY,r=n.scale;i&&s&&r&&(this.$refs.cdWrapper.style.transform="translate3d("+this.position.offsetX+"px, "+this.position.offsetY+"px, 0) scale("+this.position.scale+")")},getPosAndScale:function(){var t=this.$refs.miniImg.getBoundingClientRect(),e=this.$refs.cdWrapper.getBoundingClientRect(),n=t.width/e.width;return{offsetX:(t.left+t.right)/2-(e.left+e.right)/2,offsetY:(t.top+t.bottom)/2-(e.top+e.bottom)/2,scale:n}},showPlaylist:function(){this.$refs.playlist.show()}},Object(T.d)(["SET_FULLSCREEN","SET_PLAYING_STATE","SET_CURRENTINDEX","SET_PLAY_MODE","SET_PLAYLIST"]),Object(T.b)(["savePlayHistory"])),computed:r()({},Object(T.c)(["playList","fullScreen","currentSong","playingState","currentIndex","mode","sequenceList","vkey"]),{modeIconStyle:function(){var t="";switch(this.mode){case E.a.sequence:t="icon-liebiaoxunhuan";break;case E.a.loop:t="icon-danquxunhuan";break;case E.a.random:t="icon-icon-test"}return t},playIconStyle:function(){return this.playingState?"icon-bofang":"icon-zanting"},rotateState:function(){return this.playingState?"playing":"playing pause"},isSongReadyClass:function(){return this.songReady?"":"disable"},curPercent:function(){return this.currentTime/this.currentSong.duration},curSongUrl:function(){var t=this;if(this.currentSong.url)return this.currentSong.url.replace(/vkey=([^&]+)&/,function(e,n){return"vkey="+t.vkey+"&"})}}),filters:{singer:function(t){if(t){var e="";return t.forEach(function(t,n){0===n?e=t.name:e+="/"+t.name}),e}},toDuration:function(t){var e=parseInt(t/60),n=parseInt(t%60);return e+":"+parseInt(n/10)+parseInt(n%10)},miniLyric:function(t,e){if(t)return t.length?t[e]&&t[e].txt:"此歌曲为没有填词的纯音乐，请您欣赏"}},watch:{currentSong:function(t,e){var n=this;if(t.id!==e.id&&t.id){if(this.currentLyric.stop&&this.currentLyric.stop(),this.firstInPlayer)return this.SET_PLAYING_STATE(!1),void this.getLrc();this.$nextTick(function(){n.$refs.audio.play(),n.getLrc()})}},playingState:function(t){var e=this;this.$nextTick(function(){var n=e.$refs.audio;t?n.play():n.pause()})}},components:{Progressbar:v,ProgressCircle:f,Scroll:u.a,Playlist:Y,Volume:S}},V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.playList.length>0,expression:"playList.length > 0"}],staticClass:"player"},[n("transition",{attrs:{name:"normal-player"},on:{enter:t.enter,"after-enter":t.afterEnter,"before-leave":t.beforeLeave,leave:t.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreen,expression:"fullScreen"}],staticClass:"normal-player"},[n("div",{staticClass:"background"},[n("img",{attrs:{src:t.currentSong.image,width:"100%",height:"100%"}})]),t._v(" "),n("div",{staticClass:"top"},[n("span",{staticClass:"iconfont icon-down-trangle",on:{click:t.pickUpPlayer}}),t._v(" "),n("div",{staticClass:"title-wrapper"},[n("h3",{staticClass:"title"},[t._v(t._s(t.currentSong.name))])]),t._v(" "),n("p",{staticClass:"subtitle"},[t._v(t._s(t._f("singer")(t.currentSong.singer)))])]),t._v(" "),n("div",{staticClass:"middle",on:{touchstart:t.midStartTouch,touchmove:t.midTouchMove,touchend:t.midEndTouch}},[n("div",{ref:"midLeft",staticClass:"middle-left"},[n("div",{ref:"cdWrapper",staticClass:"cd-wrapper"},[n("div",{class:["cd",t.rotateState]},[n("img",{attrs:{src:t.currentSong.image}})])]),t._v(" "),n("div",{staticClass:"mini-lyric-wrapper"},[n("p",{staticClass:"lyric-txt"},[t._v(t._s(t._f("miniLyric")(t.currentLyric.lines,t.currentLrcLine)))])])]),t._v(" "),n("div",{ref:"midRight",staticClass:"middle-right"},[n("Scroll",{ref:"lyricScroll",staticClass:"lyric-wrapper",attrs:{data:t.currentLyric&&t.currentLyric.lines}},[n("div",{staticClass:"current-lyric"},t._l(t.currentLyric.lines,function(e,i){return n("p",{key:e.time,ref:"lyricEles",refInFor:!0,class:["lyric-line",{"active-lrc":t.currentLrcLine===i}]},[t._v("\n                                "+t._s(e.txt)+"\n                            ")])}))])],1)]),t._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"vocie-wrapper"},[n("Volume",{on:{volume:t.changeVolume}})],1),t._v(" "),n("div",{staticClass:"dot-wrapper"},[n("div",{class:["dot",{"dot-active":!t.lycPageShow}]}),t._v(" "),n("div",{class:["dot",{"dot-active":t.lycPageShow}]})]),t._v(" "),n("div",{staticClass:"progress-wrapper"},[n("span",{staticClass:"time"},[t._v(t._s(t._f("toDuration")(t.currentTime)))]),t._v(" "),n("div",{staticClass:"progress-content"},[n("Progressbar",{attrs:{percent:t.curPercent},on:{changepercent:t.changeProgress}})],1),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t._f("toDuration")(t.currentSong.duration)))])]),t._v(" "),n("div",{staticClass:"operators"},[n("div",{on:{click:t.changeMode}},[n("span",{class:["iconfont",t.modeIconStyle]})]),t._v(" "),n("div",{class:t.isSongReadyClass,on:{click:t.prevSong}},[n("span",{staticClass:"iconfont icon-kuaitui"})]),t._v(" "),n("div",[n("span",{class:["iconfont",t.playIconStyle,t.isSongReadyClass],on:{click:t.toggleState}})]),t._v(" "),n("div",{class:t.isSongReadyClass,on:{click:t.nextSong}},[n("span",{staticClass:"iconfont icon-kuaijin"})]),t._v(" "),n("div",[n("span",{class:["iconfont",t.getFavIcon(t.currentSong)],on:{click:function(e){t.toggleFavState(t.currentSong)}}})])])])])]),t._v(" "),n("transition",{attrs:{name:"mini-player"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullScreen,expression:"!fullScreen"}],staticClass:"mini-player",on:{click:t.unfoldPlayer}},[n("div",{class:["icon",t.rotateState]},[n("img",{ref:"miniImg",attrs:{src:t.currentSong.image}})]),t._v(" "),n("div",{staticClass:"text"},[n("h4",{staticClass:"name"},[t._v(t._s(t.currentSong.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t._f("singer")(t.currentSong.singer)))])]),t._v(" "),n("div",{staticClass:"controller"},[n("ProgressCircle",{attrs:{percent:t.curPercent},on:{svgclicked:t.toggleState}},[n("span",{class:["iconfont iconplay",t.playIconStyle],on:{click:function(e){return e.stopPropagation(),t.toggleState(e)}}})]),t._v(" "),n("div",{staticClass:"sequence-list",on:{click:function(e){return e.stopPropagation(),t.showPlaylist(e)}}},[n("span",{staticClass:"iconfont icon-bofangliebiao"})])],1)])]),t._v(" "),n("audio",{ref:"audio",attrs:{src:t.curSongUrl},on:{canplay:t.ready,error:t.error,timeupdate:t.timeUpdate,ended:t.end}}),t._v(" "),n("Playlist",{ref:"playlist"})],1)},staticRenderFns:[]};var B=n("VU/8")(j,V,!1,function(t){n("SiyX")},"data-v-06905e29",null).exports,G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},t._l(t.navData,function(e,i){return n("router-link",{key:i,attrs:{to:{name:e.toName},tag:"div"}},[n("span",{class:["iconfont",e.icon]}),t._v(" "),n("span",[t._v(t._s(e.title))])])}))},staticRenderFns:[]};var J={name:"App",components:{Footer:n("VU/8")({data:function(){return{navData:[{icon:"icon-yinle",title:"推荐",toName:"recommend"},{icon:"icon-geshou",title:"歌手",toName:"singer"},{icon:"icon-paixing",title:"排行",toName:"rank"},{icon:"icon-faxian",title:"搜索",toName:"search"},{icon:"icon-mo",title:"用户",toName:"user"}]}},methods:{}},G,!1,function(t){n("1jO5")},"data-v-2f7b0463",null).exports,Player:B},mounted:function(){var t=this;this.$get("/vkey").then(function(e){e.data.replace(/\(({.+})\)/,function(e,n){var i=JSON.parse(n).req.data.vkey;t.SET_VKEY(i)})})},methods:r()({},Object(T.d)(["SET_VKEY"]))},Q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("transition",{attrs:{name:"router-toggle"}},[e("keep-alive",[e("router-view")],1)],1)],1),this._v(" "),e("Footer"),this._v(" "),e("Player")],1)},staticRenderFns:[]};var z=n("VU/8")(J,Q,!1,function(t){n("Tq2H")},"data-v-8ce31b66",null).exports,K=n("/ocq"),Z=n("e5RB"),tt=n("GQaK"),et={props:{loop:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},data:function(){return{dots:[],currentIndex:0,timer:null}},mounted:function(){var t=this;this.initWidth(),this.initDots(),this.initSlider(),this.handleAutoplay(),window.addEventListener("resize",function(){t.initWidth(!0),t.slider.refresh()})},methods:{initWidth:function(t){var e=0,n=this.$refs.sliderWrapper.clientWidth;this.children=this.$refs.imgWrapper.children;for(var i=0;i<this.children.length;i++){var s=this.children[i];s.style.width=n+"px",s.classList.add("slider-item"),e+=n}this.loop&&!t&&(e+=2*n),this.$refs.imgWrapper.style.width=e+"px"},initDots:function(){this.dots=new Array(this.children.length)},initSlider:function(){var t=this;this.slider=new tt.a(this.$refs.sliderWrapper,{click:!0,scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400}}),this.slider.on("scrollEnd",function(){var e=t.slider.getCurrentPage();t.currentIndex=e.pageX,t.handleAutoplay()})},handleAutoplay:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.currentIndex=t.currentIndex<t.children.length-3?t.currentIndex+1:0,t.slider.goToPage(t.currentIndex,0,400)},this.interval)},destroyed:function(){clearTimeout(this.timer)}}},nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"slider"},[n("div",{ref:"sliderWrapper",staticClass:"slider-wrapper"},[n("div",{ref:"imgWrapper",staticClass:"img-wrapper"},[t._t("default")],2)]),t._v(" "),n("div",{staticClass:"dots"},t._l(t.dots,function(e,i){return n("span",{key:i,class:["dot",{"dot-active":t.currentIndex===i}]})}))])},staticRenderFns:[]};var it=n("VU/8")(et,nt,!1,function(t){n("IYFq")},"data-v-3d87d137",null).exports,st=n("m40h"),rt={mixins:[w.c],data:function(){return{sliderDatas:[],discList:[]}},methods:r()({handlePlaylist:function(){this.playlistLength?this.$refs.listScrollWrapper.style.paddingBottom="6rem":this.$refs.listScrollWrapper.style.paddingBottom="",this.$refs.scroll.refresh()},getSliderDatas:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(st.c)();case 2:n=e.sent,t.sliderDatas=n.slider;case 4:case"end":return e.stop()}},e,t)}))()},getRecommendData:function(){var t=this;return l()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(st.b)();case 2:n=e.sent,t.discList=n.data.list;case 4:case"end":return e.stop()}},e,t)}))()},checkablum:function(t){this.SET_DISC(t),this.$router.push({path:"/recommend/"+t.dissid})},changePosition:function(){this.$refs.recList.style.top=this.$refs.recList.offsetTop+"px"}},Object(T.d)(["SET_DISC"])),mounted:function(){var t=this;this.getSliderDatas(),this.getRecommendData(),this.$nextTick(function(){t.changePosition()})},components:{Slider:it,Scroll:u.a,Loading:Z.a}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommend"},[t.sliderDatas.length?n("div",[n("Slider",t._l(t.sliderDatas,function(t){return n("div",{key:t.id},[n("a",{attrs:{href:t.linkUrl}},[n("img",{attrs:{src:t.picUrl}})])])}))],1):t._e(),t._v(" "),t.sliderDatas.length?t._e():n("div",{staticClass:"stake"}),t._v(" "),n("div",{ref:"recList",staticClass:"recommend-list"},[n("h3",{staticClass:"list-title"},[t._v("热门歌单推荐")]),t._v(" "),n("div",{ref:"listScrollWrapper",staticClass:"list-scroll-wrapper"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.discList}},[n("ul",t._l(t.discList,function(e){return n("li",{key:e.dissid,staticClass:"item",on:{click:function(n){t.checkablum(e)}}},[n("div",{staticClass:"icon"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgurl,expression:"item.imgurl"}],attrs:{width:"60",height:"60"}})]),t._v(" "),n("div",{staticClass:"text"},[n("h4",{staticClass:"name",domProps:{innerHTML:t._s(e.creator.name)}}),t._v(" "),n("p",{staticClass:"dest",domProps:{innerHTML:t._s(e.dissname)}})])])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.discList.length,expression:"!discList.length"}],staticClass:"loading-container"},[n("Loading")],1)])],1)]),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var ot=n("VU/8")(rt,at,!1,function(t){n("Ono3")},"data-v-9a6bfd3c",null).exports;i.a.use(K.a);var ct=new K.a({routes:[{path:"/",redirect:"/recommend"},{path:"/recommend",name:"recommend",component:ot,children:[{path:":id",name:"disc",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"CTeH"))}}]},{path:"/singer",name:"singer",component:function(t){return n.e(2).then(function(){var e=[n("hbgm")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",name:"SingerDetail",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("MpnG")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/rank",name:"rank",component:function(t){return n.e(3).then(function(){var e=[n("3e0L")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",name:"toplist",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){var e=[n("9Xki")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/search",name:"search",component:function(t){return n.e(7).then(function(){var e=[n("GSpQ")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("MpnG")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/user",name:"user",component:function(t){return n.e(5).then(function(){var e=[n("+L4n")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]}),lt={state:{playing:!1,fullScreen:!1,playList:[],sequenceList:[],mode:E.a.sequence,currentIndex:-1},getters:{playlistLength:function(t){return t.playList.length},playingState:function(t){return t.playing},fullScreen:function(t){return t.fullScreen},playList:function(t){return t.playList},sequenceList:function(t){return t.sequenceList},mode:function(t){return t.mode},currentIndex:function(t){return t.currentIndex},currentSong:function(t){return t.playList[t.currentIndex]||{}}},mutations:{SET_PLAYING_STATE:function(t,e){t.playing=e},SET_FULLSCREEN:function(t,e){t.fullScreen=e},SET_PLAYLIST:function(t,e){t.playList=e},SET_SEQUENCELIST:function(t,e){t.sequenceList=e},SET_PLAY_MODE:function(t,e){t.mode=e},SET_CURRENTINDEX:function(t,e){t.currentIndex=e}},actions:{selectPlay:function(t,e){var n=t.commit,i=t.state,s=e.list,r=e.index;if(i.mode===E.a.random){var a=Object(X.a)(s);r=ut(a,s[r]),n("SET_PLAYLIST",a)}else n("SET_PLAYLIST",s);n("SET_SEQUENCELIST",s),n("SET_FULLSCREEN",!0),n("SET_PLAYING_STATE",!0),n("SET_CURRENTINDEX",r)},randomPlay:function(t,e){var n=t.commit,i=e.list;n("SET_PLAY_MODE",E.a.random),n("SET_SEQUENCELIST",i),n("SET_PLAYLIST",Object(X.a)(i)),n("SET_CURRENTINDEX",0),n("SET_FULLSCREEN",!0),n("SET_PLAYING_STATE",!0)},insertSong:function(t,e){var n=t.commit,i=t.state,s=i.playList.slice(),r=i.sequenceList.slice(),a=i.currentIndex,o=s[a],c=ut(s,e);a++,s.splice(a,0,e),c>-1&&(a>c?(s.splice(c,1),a--):s.splice(c+1,1));var l=ut(r,o),u=ut(r,e);r.splice(l+1,0,e),u>-1&&(l>u?r.splice(u,1):r.splice(u+1,1)),n("SET_PLAYLIST",s),n("SET_SEQUENCELIST",r),n("SET_CURRENTINDEX",a),n("SET_PLAYING_STATE",!0),n("SET_FULLSCREEN",!0)},deleteSong:function(t,e){var n=t.commit,i=t.state,s=i.playList.slice(),r=i.sequenceList.slice(),a=i.currentIndex,o=ut(s,e);s.splice(o,1);var c=ut(r,e);r.splice(c,1),(a>o||a===s.length)&&a--,n("SET_PLAYLIST",s),n("SET_SEQUENCELIST",r),n("SET_CURRENTINDEX",a),n("SET_PLAYING_STATE",s.length>0)},deleteSongList:function(t){var e=t.commit;e("SET_PLAYLIST",[]),e("SET_SEQUENCELIST",[]),e("SET_CURRENTINDEX",-1),e("SET_PLAYING_STATE",!1)}}};function ut(t,e){return t.findIndex(function(t){return t.id===e.id})}var ht=n("mvHQ"),dt=n.n(ht),ft=n("Zrlr"),pt=n.n(ft),mt=n("wxAW"),vt=n.n(mt),gt=function(){function t(e){pt()(this,t),this.storeKey=e,this.initJSON()}return vt()(t,[{key:"initJSON",value:function(){try{this.iJSON=localStorage[this.storeKey]?JSON.parse(localStorage[this.storeKey]):[]}catch(t){this.iJSON=[]}}},{key:"set",value:function(t){try{localStorage[this.storeKey]=dt()(t),this.iJSON=t.slice()}catch(t){console.log(t)}}},{key:"get",value:function(){return this.iJSON}}]),t}(),yt=50,St=200,_t=new gt("search_history"),wt=new gt("favorite_list"),Tt=new gt("play_history");function Et(t,e,n,i){var s=t.findIndex(function(t){return i?i(t,e):t===e});return s>-1&&t.splice(s,1),t.unshift(e),n&&n<t.length&&t.pop(),t}function Ct(t,e,n){var i=t.findIndex(function(t){return n?n(t,e):t===e});return i>-1&&t.splice(i,1),t}var xt={state:{searchHistory:_t.get().slice(),playHistory:Tt.get().slice(),favorite:wt.get().slice()},getters:{searchHistory:function(t){return t.searchHistory},playHistory:function(t){return t.playHistory},favorite:function(t){return t.favorite}},mutations:{SET_PLAY_HISTORY:function(t,e){t.playHistory=e},SET_SEARCH_HISTORY:function(t,e){t.searchHistory=e},SET_FAVORITE:function(t,e){t.favorite=e}},actions:{savePlayHistory:function(t,e){(0,t.commit)("SET_PLAY_HISTORY",function(t){var e=Et(Tt.get(),t,St,function(t,e){return t.id===e.id});return Tt.set(e),e}(e))},saveFavorite:function(t,e){(0,t.commit)("SET_FAVORITE",function(t){var e=Et(wt.get(),t,500,function(t,e){return t.id===e.id});return wt.set(e),e}(e))},deleteFavorite:function(t,e){(0,t.commit)("SET_FAVORITE",function(t){var e=Ct(wt.get(),t,function(t,e){return t.id===e.id});return wt.set(e),e}(e))},saveSearchHistory:function(t,e){var n,i;(0,t.commit)("SET_SEARCH_HISTORY",(n=e,i=Et(_t.get(),n,yt),_t.set(i),i))},deleteSearchHistory:function(t,e){(0,t.commit)("SET_SEARCH_HISTORY",function(t){var e=Ct(_t.get(),t);return _t.set(e),e}(e))},clearSearchHistory:function(t){(0,t.commit)("SET_SEARCH_HISTORY",(_t.set([]),[]))}}};i.a.use(T.a);var Lt=new T.a.Store({strict:!1,modules:{player:lt,transit:{state:{disc:{},singer:{},toplist:{},vkey:""},getters:{disc:function(t){return t.disc},singer:function(t){return t.singer},toplist:function(t){return t.toplist},vkey:function(t){return t.vkey}},mutations:{SET_DISC:function(t,e){t.disc=e},SET_SINGER:function(t,e){t.singer=e},SET_TOPLIST:function(t,e){t.toplist=e},SET_VKEY:function(t,e){t.vkey=e}}},cache:xt}}),bt=n("cTzj"),It=n.n(bt),Pt=(n("cN2K"),n("v5o6"));n.n(Pt).a.attach(document.body),i.a.config.productionTip=!1,i.a.use(It.a,{loading:n("OTtn")}),i.a.prototype.$post=D.a.postData,i.a.prototype.$get=D.a.getData,new i.a({el:"#app",router:ct,store:Lt,render:function(t){return t(z)}})},OTtn:function(t,e,n){t.exports=n.p+"static/img/bagua.62b511d.png"},Ono3:function(t,e){},PvFA:function(t,e,n){"use strict";e.a=function(t){return new function(t){var e=t.id,n=t.mid,i=t.singer,s=t.name,r=t.album,a=t.duration,o=t.image,c=t.url;this.id=e,this.mid=n,this.singer=i,this.name=s,this.album=r,this.duration=a,this.image=o,this.url=c}({id:t.songid,mid:t.songmid,singer:t.singer,name:t.songname,album:t.albumname,duration:t.interval,image:"//y.gtimg.cn/music/photo_new/T002R300x300M000"+t.albummid+".jpg?max_age=2592000",url:"http://dl.stream.qqmusic.qq.com/C400"+t.strMediaMid+".m4a?guid=4840101680&vkey="+i+"&uin=0&fromtag=38"})};var i="ABC"},Qm0G:function(t,e){},SiyX:function(t,e){},Tq2H:function(t,e){},Vqun:function(t,e,n){"use strict";var i=n("GQaK"),s={props:{data:{type:Array,default:null},click:{type:Boolean,default:!0},listenScroll:{type:Boolean,default:!1},probeType:{type:Number,default:1},pullupload:{type:Boolean,default:!1},beforeScroll:{type:Boolean,default:!1}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},methods:{initScroll:function(){var t=this;this.$refs.scrollInner&&(this.scroll=new i.a(this.$refs.scrollInner,{click:this.click,probeType:this.probeType}),this.listenScroll&&this.scroll.on("scroll",function(e){t.$emit("scrolling",e)}),this.pullupload&&this.scroll.on("scrollEnd",function(){t.scroll.y<t.scroll.maxScrollY+50&&t.$emit("scrollToEnd")}),this.beforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforescroll")}))},refresh:function(){this.scroll&&this.scroll.refresh()},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},enable:function(){this.scroll&&this.scroll.enable()},disable:function(){this.scroll&&this.scroll.disable()}},watch:{data:function(){this.refresh()}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"scrollInner"},[this._t("default")],2)},staticRenderFns:[]},a=n("VU/8")(s,r,!1,null,null,null).exports;e.a=a},"W/7t":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={sequence:0,loop:1,random:2}},W54a:function(t,e){},X62J:function(t,e){},aiI6:function(t,e){},bqM4:function(t,e,n){"use strict";var i=n("Vqun"),s={props:{dataList:{type:Array,default:function(){return[]}}},methods:{refresh:function(){this.$refs.scroll.refresh()},selectedItem:function(t){this.$emit("selected",t)},deleteItem:function(t){this.$emit("deleted",t)}},components:{Scroll:i.a}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"searchlist",staticClass:"search-list"},[n("Scroll",{ref:"scroll",staticClass:"search-scroll-wrapper",attrs:{data:t.dataList}},[n("ul",t._l(t.dataList,function(e,i){return n("li",{key:i,staticClass:"item",on:{click:function(n){t.selectedItem(e)}}},[n("p",{staticClass:"text"},[t._v(t._s(e))]),t._v(" "),n("span",{staticClass:"iconfont icon-cha",on:{click:function(n){n.stopPropagation(),t.deleteItem(e)}}})])}))])],1)},staticRenderFns:[]};var a=n("VU/8")(s,r,!1,function(t){n("pZ6t")},"data-v-1d18174c",null).exports;e.a=a},cN2K:function(t,e){},dyme:function(t,e,n){"use strict";var i={props:{datas:{type:Array,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{currentIndex:0}},mounted:function(){this.currentIndex=this.index},methods:{selectItem:function(t){this.currentIndex=t,this.$emit("switch",t)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"switch"},t._l(t.datas,function(e,i){return n("li",{key:i,class:["item",{active:t.currentIndex===i}],on:{click:function(e){t.selectItem(i)}}},[n("span",[t._v(t._s(e))])])}))},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("xCY/")},"data-v-6bfff92c",null).exports;e.a=r},e5RB:function(t,e,n){"use strict";var i={props:{title:{type:String,default:"数据加载中..."},mini:{type:Boolean,default:!1}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return this.mini?e("div",{staticClass:"mini"},[e("img",{attrs:{src:n("zUsG"),height:"25",width:"25"}})]):e("div",{staticClass:"loading"},[e("img",{attrs:{src:n("zUsG"),height:"60",width:"60"}}),this._v(" "),e("p",{staticClass:"title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("B6Z8")},"data-v-625fc6d5",null).exports;e.a=r},"f//3":function(t,e){},gyMJ:function(t,e,n){"use strict";e.b=o;var i=n("//Fk"),s=n.n(i),r=n("mtWM"),a=n.n(r);function o(t,e){return new s.a(function(n,i){var s={params:e};a.a.get(t,s).then(function(t){n(t.data)},function(t){i(t)})})}a.a.defaults.timeout=1e4,a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8;",a.a.defaults.baseURL="http://music.60late.com",a.a.interceptors.request.use(function(t){return t},function(t){return console.log("post error"),s.a.reject(t)}),a.a.interceptors.response.use(function(t){return t.data?t:s.a.resolve(t)},function(t){return console.log("response error"),s.a.reject(t)}),e.a={postData:function(t,e){return new s.a(function(n,i){a.a.post(t,e).then(function(t){n(t.data)},function(t){i(t)})})},getData:o}},is1l:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"b",function(){return h});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),a=n("W/7t"),o=n("x8dC"),c={computed:s()({},Object(r.c)(["playList","playlistLength"])),mounted:function(){this.handlePlaylist(this.playList)},activated:function(){this.handlePlaylist(this.playList)},watch:{playList:function(t){this.handlePlaylist(t)}},methods:{handlePlaylist:function(){throw new Error("component must implement handlePlaylist method")}}},l={methods:{changeMode:function(){var t=(this.mode+1)%3;this.SET_PLAY_MODE(t);var e=null;e=t===a.a.random?Object(o.a)(this.sequenceList):this.sequenceList,this.resetCurrentIndex(e),this.SET_PLAYLIST(e)},resetCurrentIndex:function(t){var e=this,n=t.findIndex(function(t){return t.id===e.currentSong.id});this.SET_CURRENTINDEX(n)}}},u={methods:s()({},Object(r.b)(["saveSearchHistory","deleteSearchHistory"]),{queryChange:function(t){var e=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){t?(e.query=t,e.queryShow=!0):e.queryShow=!1},200)},listScroll:function(){this.$refs.searchBox.blur()},deleteHistory:function(t){this.deleteSearchHistory(t)},addQuery:function(t){this.$refs.searchBox.setQuery(t)}})},h={methods:s()({getFavIcon:function(t){return this.isFavoriteSong(t)?"icon-shoucang xihuan":"icon-shoucang1"},toggleFavState:function(t){this.isFavoriteSong(t)?this.deleteFavorite(t):this.saveFavorite(t)},isFavoriteSong:function(t){return this.favorite.findIndex(function(e){return e.id===t.id})>-1}},Object(r.b)(["saveFavorite","deleteFavorite"])),computed:s()({},Object(r.c)(["favorite"]))}},kaUw:function(t,e,n){"use strict";var i=n("woOf"),s=n.n(i),r=n("Xxa5"),a=n.n(r),o=n("exGp"),c=n.n(o),l=n("Dd8w"),u=n.n(l),h=n("Vqun"),d=n("e5RB"),f=n("8stH"),p=n("PvFA"),m=n("NYxO"),v={props:{query:{type:String,default:""},showSinger:{type:Boolean,default:!0},showAlbum:{type:Boolean,default:!0}},data:function(){return{page:0,ismore:!0,result:[],showResult:!1}},activated:function(){this.showResult=!1},methods:u()({scrollStart:function(){this.$emit("beforescroll")},selectItem:function(t){if("singer"===t.type)this.showResult=!0,this.SET_SINGER({singer_id:t.singerid,singer_name:t.singername,singer_pic:"http://y.gtimg.cn/music/photo_new/T001R150x150M000"+t.singermid+".webp"}),this.$router.push({path:"/search/"+t.singerid});else{if("album"===t.type)return void console.log(t);this.$store.dispatch("insertSong",t)}this.$emit("selected")},searchMoreSong:function(){this.ismore&&(this.page+=1,this.getSearchResult(!0))},getSearchResult:function(t){var e=this;return c()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t||(e.page=1,e.ismore=!0),n.next=3,Object(f.b)(e.query,e.page);case 3:(!(i=n.sent).song.list.length||20*i.song.curpage>=i.song.totalnum)&&(e.ismore=!1),e.result=t?e.result.concat(e.formatResult(i)):e.formatResult(i,!0),e.$nextTick(function(){e.$refs.scroll.refresh()});case 7:case"end":return n.stop()}},n,e)}))()},formatResult:function(t,e){var n=[];return 2==t.zhida.type&&this.showSinger&&e&&n.push(u()({},t.zhida,{type:"singer"})),3==t.zhida.type&&this.showAlbum&&e&&n.push(u()({},t.zhida,{type:"album"})),t.song.curnum&&(n=n.concat(this.makeSongs(t.song.list))),n},makeSongs:function(t){var e=[];return t.forEach(function(t){t.songid&&t.albumid&&e.push(Object(p.a)(s()({},t,{strMediaMid:t.songmid})))}),e},getTxt:function(t){if("singer"===t.type)return t.singername;if("album"===t.type)return t.albumname;if(!t.type){var e="";return t.singer.forEach(function(t,n){n?e+="/"+t.name:e=t.name}),t.name+" - "+e}},getIcon:function(t){return"singer"===t?"icon-geshou":"album"===t?"icon-zhuanji":"icon-yinle"}},Object(m.d)(["SET_SINGER"])),watch:{query:function(t){this.getSearchResult()}},components:{Scroll:h.a,Loading:d.a}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"suggest"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.result,pullupload:!0,beforeScroll:!0},on:{scrollToEnd:t.searchMoreSong,beforescroll:t.scrollStart}},[n("ul",{staticClass:"seggest-list"},[t._l(t.result,function(e,i){return n("li",{key:i,staticClass:"suggest-item",on:{click:function(n){t.selectItem(e)}}},[n("span",{class:["iconfont",t.getIcon(e.type)]}),t._v(" "),n("p",{staticClass:"name",domProps:{innerHTML:t._s(t.getTxt(e))}})])}),t._v(" "),n("Loading",{directives:[{name:"show",rawName:"v-show",value:t.ismore,expression:"ismore"}],attrs:{mini:!0}}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:!t.ismore&&!this.result.length,expression:"!ismore && !this.result.length"}],staticStyle:{"text-align":"center"}},[t._v("\n                抱歉，没有搜索结果\n            ")])],2)]),t._v(" "),n("router-view",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}]})],1)},staticRenderFns:[]};var y=n("VU/8")(v,g,!1,function(t){n("M4y/")},"data-v-dbc48f3a",null).exports;e.a=y},m40h:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return c});var i=n("//Fk"),s=n.n(i),r=n("gyMJ"),a=function(){return new s.a(function(t,e){Object(r.b)("/pageslider").then(function(e){t(e.data)},function(t){e(t)})})},o=function(){return new s.a(function(t,e){Object(r.b)("/recommend").then(function(e){t(e.data)},function(t){e(t)})})},c=function(t){return new s.a(function(e,n){Object(r.b)("/disclist",{dissid:t}).then(function(t){e(t.data)},function(t){n(t)})})}},ndNT:function(t,e){},pZ6t:function(t,e){},vZ6m:function(t,e){},wGV7:function(t,e){},x8dC:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){for(var e,n,i=[],s=0;s<t.length;s++){i[s]=t[s];var r=(e=0,n=s,Math.floor(Math.random()*(n-e+1)+e)),a=i[s];i[s]=i[r],i[r]=a}return i}},"xCY/":function(t,e){},zUsG:function(t,e,n){t.exports=n.p+"static/img/loading.65a9057.gif"}},["NHnr"]);
//# sourceMappingURL=app.3be272130a162d2fad49.js.map