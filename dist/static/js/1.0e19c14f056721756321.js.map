{"version":3,"sources":["webpack:///src/views/singer-detail/singer-detail.vue","webpack:///./src/views/singer-detail/singer-detail.vue?e429","webpack:///./src/views/singer-detail/singer-detail.vue","webpack:///./src/api/singer.js"],"names":["singer_detail","data","page","songs","mounted","this","getSongsList","methods","notFirst","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","list","i","wrap","_context","prev","next","singer","singer_id","$router","back","Object","sent","abrupt","length","musicData","albummid","strMediaMid","push","song","concat","stop","getMoreSongs","computed","extends_default","vuex_esm","components","Backicon","backicon","Discview","discview","singer_detail_singer_detail","render","_h","$createElement","_c","_self","attrs","name","staticClass","_v","bg-image","singer_pic","title","singer_name","more","on","getmoresong","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","getSingerList","opt","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","resolve","reject","getData","then","res","err","getSingerSongs","id"],"mappings":"yPAkBAA,GACAC,KADA,WAEA,OACAC,KAAA,EACAC,WAGAC,QAPA,WAQAC,KAAAC,gBAEAC,SACAD,aADA,SACAE,GAAA,IAAAC,EAAAJ,KAAA,OAAAK,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAb,EAAAc,EAAAZ,EAAAa,EAAA,OAAAL,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACAX,EAAAY,OAAAC,WACAb,EAAAc,QAAAC,OAEAhB,IAAAC,EAAAP,KAAA,GAJAgB,EAAAE,KAAA,EAKAK,OAAAJ,EAAA,EAAAI,CAAAhB,EAAAY,OAAAC,UAAAb,EAAAP,MALA,UAKAD,EALAiB,EAAAQ,KAOAX,EAAAd,EAAAc,KACAZ,KAEAY,EAVA,CAAAG,EAAAE,KAAA,eAAAF,EAAAS,OAAA,iBAWA,IAAAX,EAAA,EAAAA,EAAAD,EAAAa,OAAAZ,IACAD,EAAAC,GAAAa,UAAAC,UAAAf,EAAAC,GAAAa,UAAAE,aACA5B,EAAA6B,KAAAP,OAAAQ,EAAA,EAAAR,CAAAV,EAAAC,GAAAa,YAGApB,EAAAN,MADAK,EACAC,EAAAN,MAAA+B,OAAA/B,GAEAA,EAlBA,yBAAAe,EAAAiB,SAAArB,EAAAL,KAAAC,IAsBA0B,aAvBA,WAyBA/B,KAAAH,OACAG,KAAAC,cAAA,KAGA+B,SAAcC,OACdb,OAAAc,EAAA,EAAAd,EAAA,YAEAe,YACAC,SAAAC,EAAA,EAAAC,SAAAC,EAAA,IC1DeC,GADEC,OAFjB,WAA0B,IAAaC,EAAb1C,KAAa2C,eAA0BC,EAAvC5C,KAAuC6C,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,OAAOC,KAAA,YAAiBH,EAAA,OAAYI,YAAA,kBAA4BJ,EAAA,YAAvJ5C,KAAuJiD,GAAA,KAAAL,EAAA,YAA4CE,OAAOhD,MAA1ME,KAA0MF,MAAAoD,WAA1MlD,KAA0MgB,OAAAmC,WAAAC,MAA1MpD,KAA0MgB,OAAAqC,YAAAC,MAAA,GAA8FC,IAAKC,YAA7SxD,KAA6S+B,iBAAgC,MAEtV0B,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEjE,EACA6C,GATF,EAVA,SAAAqB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,kJCxBnBK,EAAgB,SAACC,GAC1B,OAAO,IAAIC,EAAA1D,EAAQ,SAAC2D,EAASC,GACzBC,YAAQ,cAAeJ,GAAKK,KAAK,SAAAC,GAC7BJ,EAAQI,EAAI1E,OACb,SAAA2E,GACCJ,EAAOI,QAKNC,EAAiB,SAACC,EAAI5E,GAC/B,OAAO,IAAIoE,EAAA1D,EAAQ,SAAC2D,EAASC,GACzBC,YAAQ,gBACJK,KAAI5E,SACLwE,KAAK,SAAAC,GACJJ,EAAQI,EAAI1E,OACb,SAAA2E,GACCJ,EAAOI","file":"static/js/1.0e19c14f056721756321.js","sourcesContent":["<template>\r\n    <transition name=\"singer\">\r\n        <div class=\"singer-detail\">\r\n            <Backicon />\r\n            <Discview :songs='songs' :bg-image='singer.singer_pic' :title='singer.singer_name' \r\n                :more='true' @getmoresong='getMoreSongs'/>\r\n            <!-- <MusicList :songs='songs' :bg-image='singer.singer_pic' :title='singer.singer_name' \r\n            @getmoresong='getMoreSongs' :backto=\"backto\"></MusicList> -->\r\n        </div>\r\n    </transition>\r\n</template>\r\n<script>\r\nimport Backicon from '_c/backicon'\r\nimport Discview from '_c/discview'\r\nimport { mapGetters } from 'vuex'\r\nimport { getSingerSongs } from '@/api/singer'\r\n\r\nimport { createSong } from 'common/js/song'\r\nexport default {\r\n    data() {\r\n        return {\r\n            page: 0,\r\n            songs: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getSongsList()\r\n    },\r\n    methods: {\r\n        async getSongsList (notFirst) {\r\n            if (!this.singer.singer_id) \r\n                this.$router.back()\r\n            // 首次获取\r\n            if (!notFirst) this.page = 0\r\n            let data = await getSingerSongs(this.singer.singer_id, this.page)\r\n\r\n            let list = data.list\r\n            let songs = []\r\n            // 本次获得的歌曲\r\n            if (!list) return \r\n            for(let i = 0; i < list.length; i++){\r\n                if(list[i].musicData.albummid && list[i].musicData.strMediaMid)\r\n                        songs.push(createSong(list[i].musicData))\r\n            }\r\n            if(notFirst){\r\n                this.songs = this.songs.concat(songs)\r\n            }else{\r\n                this.songs = songs\r\n            }\r\n\r\n        },\r\n        getMoreSongs() {\r\n            // 加一页歌曲\r\n            this.page++\r\n            this.getSongsList(true)\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['singer'])\r\n    },\r\n    components:{\r\n        Backicon, Discview\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../common/less/variable.less';\r\n.singer-detail{\r\n    position: fixed;bottom: @bottom-height;\r\n    top: 0; left: 0;\r\n    z-index: 10;\r\n    width: 100%;\r\n    background: lighten(@color-background, 24%);\r\n}\r\n.singer-enter-active,.singer-leave-active{\r\n    transition: all 0.5s\r\n}\r\n.singer-enter,.singer-leave-to{\r\n    opacity: 0;\r\n    transform: translateX(100%)\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/singer-detail/singer-detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"singer\"}},[_c('div',{staticClass:\"singer-detail\"},[_c('Backicon'),_vm._v(\" \"),_c('Discview',{attrs:{\"songs\":_vm.songs,\"bg-image\":_vm.singer.singer_pic,\"title\":_vm.singer.singer_name,\"more\":true},on:{\"getmoresong\":_vm.getMoreSongs}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2f2b1c95\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/singer-detail/singer-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f2b1c95\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f2b1c95\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f2b1c95\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/singer-detail/singer-detail.vue\n// module id = null\n// module chunks = ","import { getData } from './index'\r\n\r\nexport const getSingerList = (opt) => {\r\n    return new Promise((resolve, reject) => {\r\n        getData('/singerlist', opt).then(res => {\r\n            resolve(res.data)\r\n        }, err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n\r\nexport const getSingerSongs = (id, page) => {\r\n    return new Promise((resolve, reject) => {\r\n        getData('/singersongs', {\r\n            id, page\r\n        }).then(res => {\r\n            resolve(res.data)\r\n        }, err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js"],"sourceRoot":""}