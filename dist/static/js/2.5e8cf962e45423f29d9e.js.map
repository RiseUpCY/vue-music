{"version":3,"sources":["webpack:///./src/api/singer.js","webpack:///src/components/taglist/taglist.vue","webpack:///./src/components/taglist/taglist.vue?f20e","webpack:///./src/components/taglist/taglist.vue","webpack:///./src/components/taglist/index.js","webpack:///src/components/singerlist/singerlist.vue","webpack:///./src/components/singerlist/singerlist.vue?f1ff","webpack:///./src/components/singerlist/singerlist.vue","webpack:///./src/components/singerlist/index.js","webpack:///src/views/singer/singer.vue","webpack:///./src/views/singer/singer.vue?6d4b","webpack:///./src/views/singer/singer.vue"],"names":["getSingerList","opt","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","a","resolve","reject","getData","then","res","data","err","getSingerSongs","id","page","taglist","curIndex","props","type","Array","default","methods","initScroll","this","$refs","ul","style","width","length","scroll","bscroll_esm","click","scrollX","selectTag","tagId","index","$emit","watch","taglist_taglist","render","_vm","_h","$createElement","_c","_self","ref","staticClass","_l","tag","key","class","active","staticStyle","font-size","on","$event","_v","_s","name","staticRenderFns","Taglist","__webpack_require__","normalizeComponent","ssrContext","singerlist","tags","anchorIndex","listScrollY","groupHeights","diff","touchPointToTop","floatTagShow","shorcutShow","timer","showShorcut","_this","clearTimeout","setTimeout","selectedSinger","singer","getGroupTitle","findIndex","val","initGroupHeight","list","listGroup","height","i","clientHeight","push","dealScroll","e","y","dealListScroll","yTop","yBottom","handleTagTouchstart","event","scrollToElement","touches","pageY","handleTagTouchmove","moveY","parseInt","handleTagTouchend","handleAnchorIndexChange","floattag","top","filters","shortcut","substr","components","Scroll","components_scroll","computed","floatTag","_this2","$nextTick","newVal","fixTop","fixtag","transform","singerlist_singerlist","attrs","listenScroll","probeType","beforeScroll","scrolling","beforescroll","singers","refInFor","directives","rawName","value","expression","singer_id","singer_name","curt","item-active","data-index","touchstart","stopPropagation","preventDefault","touchmove","touchend","_f","SingerList","singerlist_normalizeComponent","singer_singer","mixins","cur_tag","area","genre","sex","created","getSingerListData","extends_default","asyncToGenerator_default","regenerator_default","mark","_callee","hotSinger","singerString","wrap","_context","prev","next","Object","sent","window","localStorage","all","stringify_default","unshift","JSON","parse","stop","_callee2","selectSinger","_context2","assign_default","shift","singerDetail","SET_SINGER","$router","path","singer_mid","handlePlaylist","playlistLength","singerlistWrapper","bottom","vuex_esm","Loading","loading","components_taglist","components_singerlist","views_singer_singer","onselecttag","singerdetail","singer_Component","singer_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/2.5e8cf962e45423f29d9e.js","sourcesContent":["import { getData } from './index'\r\n\r\nexport const getSingerList = (opt) => {\r\n    return new Promise((resolve, reject) => {\r\n        getData('/singerlist', opt).then(res => {\r\n            resolve(res.data)\r\n        }, err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n\r\nexport const getSingerSongs = (id, page) => {\r\n    return new Promise((resolve, reject) => {\r\n        getData('/singersongs', {\r\n            id, page\r\n        }).then(res => {\r\n            resolve(res.data)\r\n        }, err => {\r\n            reject(err)\r\n        })\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/singer.js","<template>\r\n    <div class=\"taglist\" ref=\"taglist\">\r\n        <ul ref=\"ul\">\r\n            <li v-for=\"(tag, index) in data\" :key=\"tag.id\" style='font-size: 16px;'\r\n             :class=\"{ active: curIndex === index }\" @click=\"selectTag(tag.id, index)\">\r\n                {{tag.name}}\r\n            </li>\r\n        </ul>    \r\n    </div>    \r\n</template>\r\n<script>\r\nimport BScroll from 'better-scroll'\r\nexport default {\r\n    data() {\r\n        return {\r\n            curIndex: 0\r\n        }\r\n    },\r\n    props: {\r\n        data: {\r\n            type: Array,\r\n            default: null\r\n        }\r\n    },\r\n    methods: {\r\n        initScroll () {\r\n            if(!this.$refs.taglist) return \r\n            if(!this.$refs.ul) return \r\n            this.$refs.ul.style.width = this.data.length * 45 + 'px'\r\n            \r\n            this.scroll = new BScroll(this.$refs.taglist, {\r\n                click: true,\r\n                scrollX: true\r\n            })\r\n        },\r\n        selectTag(tagId, index){\r\n            this.curIndex = index\r\n            this.$emit('onselecttag', { tagId })\r\n        }\r\n    },\r\n    watch:{\r\n        data() {\r\n            this.initScroll()\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../common/less/variable.less';\r\n.taglist{\r\n    overflow: hidden;\r\n    ul{\r\n        li{\r\n            padding: 3px 5px;\r\n            display: inline-block;\r\n        }\r\n        .active{\r\n            color: @color-background;\r\n        }\r\n        &:after{\r\n            display: block;\r\n            content: '';\r\n            clear: both;\r\n        }\r\n    }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/taglist/taglist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"taglist\",staticClass:\"taglist\"},[_c('ul',{ref:\"ul\"},_vm._l((_vm.data),function(tag,index){return _c('li',{key:tag.id,class:{ active: _vm.curIndex === index },staticStyle:{\"font-size\":\"16px\"},on:{\"click\":function($event){_vm.selectTag(tag.id, index)}}},[_vm._v(\"\\n            \"+_vm._s(tag.name)+\"\\n        \")])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-37a0e44f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/taglist/taglist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-37a0e44f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./taglist.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./taglist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./taglist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-37a0e44f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./taglist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-37a0e44f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/taglist/taglist.vue\n// module id = null\n// module chunks = ","import Taglist from './taglist'\r\nexport default Taglist\n\n\n// WEBPACK FOOTER //\n// ./src/components/taglist/index.js","<template>\r\n    <div class=\"singer-list\">\r\n        <Scroll class=\"scroll-wrapper\" :data=\"data\" :listenScroll='true' :probeType='3'\r\n                @scrolling='dealScroll' ref='scroll'\r\n                :beforeScroll='true' @beforescroll='showShorcut'>\r\n            <div>\r\n                <div class=\"singer-group\" v-for=\"singers in data\" :key=\"singers.index\" ref='listGroup'>\r\n                    <p class=\"title\">{{getGroupTitle(singers.index)}}</p>\r\n                    <ul>\r\n                        <li v-for=\"singer in singers.singerlist\" :key=\"singer.id\" class=\"item\" @click=\"selectedSinger(singer)\">\r\n                            <div class=\"img\">\r\n                                <img v-lazy=\"singer.singer_pic\" :key=\"singer.singer_id\">\r\n                            </div>\r\n                            <p class=\"name\"> \r\n                                {{ singer.singer_name }}\r\n                            </p>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </Scroll>\r\n        <transition name='list-shorcut'>\r\n            <div class='list-shorcut' v-show=\"shorcutShow\">\r\n                <ul>\r\n                    <li v-for=\"(curt, index) of tags\" :key=\"index\" :data-index='index'\r\n                        :class=\"{'item-active': anchorIndex === index}\" \r\n                        @touchstart.stop.prevent='handleTagTouchstart(index, $event)'\r\n                        @touchmove.stop.prevent='handleTagTouchmove(index, $event)'\r\n                        @touchend='handleTagTouchend(index)'>\r\n                        {{ curt.name | shortcut }}\r\n                    </li>\r\n                </ul>\r\n                <span class=\"floattag\" v-show=\"floatTagShow\" ref=\"floattag\">{{ floatTag | shortcut }}</span>\r\n            </div>\r\n        </transition>\r\n        <div class=\"fix-top\" v-show=\"listScrollY < 0\" ref=\"fixtag\">{{ floatTag }}</div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Scroll from '_c/scroll'\r\nexport default {\r\n    props: {\r\n        data: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        tags: {\r\n            type: Array,\r\n            default: () => []\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            anchorIndex: 0,\r\n            listScrollY: 0,\r\n            groupHeights: [],\r\n            diff: 0,\r\n            touchPointToTop: 0,\r\n            floatTagShow: false,\r\n            shorcutShow: false,\r\n            timer: null\r\n        }\r\n    },\r\n    methods: {\r\n        showShorcut () {\r\n            this.shorcutShow = true\r\n            clearTimeout(this.timer)\r\n            this.timer = setTimeout(() => {\r\n                this.shorcutShow = false\r\n            }, 4000)\r\n        },\r\n        selectedSinger (singer) {\r\n            this.$emit('singerdetail', singer)\r\n        },\r\n        getGroupTitle (index) {\r\n            let curIndex = this.tags.findIndex(val => {\r\n                return val.id === index\r\n            })\r\n            return this.tags[curIndex].name\r\n        },\r\n        initGroupHeight () {\r\n            let list = this.$refs.listGroup\r\n            if (!list) return\r\n            let height = 0\r\n            this.groupHeights = [ height ]\r\n            for(let i = 0; i < list.length; i++){\r\n                height += list[i].clientHeight\r\n                this.groupHeights.push(height)\r\n            }\r\n        },\r\n        dealScroll (e) {\r\n            this.listScrollY = e.y\r\n        },\r\n        dealListScroll (y) {\r\n            for (let i = 0; i < this.groupHeights.length; i++) {\r\n                let yTop = this.groupHeights[i]\r\n                let yBottom = this.groupHeights[i + 1]\r\n                if (-y >= yTop && -y < yBottom) {\r\n                    // 距离当前组顶部的距离\r\n                    this.diff = yBottom + y\r\n                    this.anchorIndex = i\r\n                    return\r\n                }\r\n            }\r\n        },\r\n        handleTagTouchstart (index, event) {\r\n            this.floatTagShow = true\r\n            this.anchorIndex = index\r\n            this.$refs.scroll.scrollToElement(this.$refs.listGroup[this.anchorIndex])\r\n            this.touchPointToTop = event.touches[0].pageY\r\n        },\r\n        handleTagTouchmove (index, event) {\r\n            let moveY = event.touches[0].pageY - this.touchPointToTop\r\n            let anchorIndex = index + parseInt(moveY / 14) >= 0 ? index + parseInt(moveY / 14) : 0\r\n            this.anchorIndex = anchorIndex > 27 ? 27 : anchorIndex\r\n            this.$refs.scroll.scrollToElement(this.$refs.listGroup[this.anchorIndex])\r\n            \r\n            this.showShorcut()\r\n        },\r\n        handleTagTouchend (index) {\r\n            // console.log(index)\r\n            this.floatTagShow = false\r\n        }, \r\n        handleAnchorIndexChange (index) {\r\n            if (this.floatTagShow) {\r\n                this.$refs.floattag.style.top = this.anchorIndex * 14 + 'px'\r\n            }\r\n        }\r\n    },\r\n    filters: {\r\n        shortcut(val) {\r\n            return val.substr(0, 1)\r\n        }\r\n    },\r\n    components: {\r\n        Scroll\r\n    },\r\n    computed: {\r\n        floatTag () {\r\n            return this.tags.length ? this.tags[this.anchorIndex].name : '热门'\r\n        }\r\n    },\r\n    watch: {\r\n        listScrollY (y) {\r\n            this.dealListScroll(y)\r\n        },\r\n        data () {\r\n            this.$nextTick(() => {\r\n                this.initGroupHeight()\r\n            })\r\n        },\r\n        diff(newVal) {\r\n            let fixTop = (newVal > 0 && newVal < 32) ? newVal - 31.5 : 0 \r\n            if(this.fixTop === fixTop)\r\n                return\r\n            this.fixTop = fixTop\r\n            this.$refs.fixtag.style.transform = `translate3d(0, ${this.fixTop}px, 0)`\r\n        },\r\n        anchorIndex (index) {\r\n            this.handleAnchorIndexChange(index)\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n@import '../../common/less/variable.less';\r\n.singer-list {\r\n    height: 100%;\r\n    overflow: hidden;\r\n    position: relative;\r\n    .scroll-wrapper{\r\n        height: 100%;\r\n        .singer-group{\r\n            .title{\r\n                background: rgba(255, 255, 255, 0.8);\r\n                color: #999;\r\n                padding: 0.3rem .5rem;\r\n            }\r\n            .item{\r\n                padding: 0.7rem .5rem 0.7rem 0.8rem;\r\n                border-bottom: 1px solid #ddd;\r\n                .img{\r\n                    float: left;\r\n                    width: 2rem;height: 2rem;\r\n                    overflow: hidden; border-radius: 50%;\r\n                    img{\r\n                        width: 100%;\r\n                        height: 100%;\r\n                    }\r\n                }\r\n                .name{\r\n                    float: left;line-height: 2rem;margin-left: 1rem;\r\n                }\r\n                &:after{\r\n                    display: block;\r\n                    content: '';\r\n                    clear: both\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .list-shorcut{\r\n        z-index: 9;\r\n        position: absolute;\r\n        top: 2rem;\r\n        right: .5rem;border-radius: 5px;\r\n        background: lighten(@color-background, 15%);\r\n        font-size: 11px;\r\n        padding:.2rem 0;\r\n        transition: opacity 1s;\r\n        ul{\r\n            color: #ccc;            \r\n            .flex;\r\n            flex-direction: column;\r\n            li{\r\n                width: 100%;\r\n                height: 14px;\r\n                line-height: 14px;\r\n                text-align: center;\r\n                padding: 0 0.1rem;\r\n            }\r\n        }\r\n        .item-active{\r\n            color: darken(@color-background, 30%);\r\n        }\r\n    }\r\n    .floattag{\r\n        width: 2rem;height: 2rem;\r\n        position: absolute;\r\n        top: 0; right: 2rem;\r\n        transform: translate3d(0, -4.5px, 0);\r\n        border-radius: 50%;\r\n        z-index: 9;\r\n        line-height: 2rem; text-align: center;\r\n        background: lighten(@color-background, 15%);\r\n    }\r\n    .fix-top{\r\n        position: absolute;\r\n        top:0;width: 100%;\r\n        background: rgba(255, 255, 255, 0.8);\r\n        color: #999;\r\n        padding: 0.3rem .5rem;\r\n    }\r\n}\r\n\r\n.list-shorcut-enter, .list-shorcut-leave-to {\r\n    opacity: 0;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/singerlist/singerlist.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer-list\"},[_c('Scroll',{ref:\"scroll\",staticClass:\"scroll-wrapper\",attrs:{\"data\":_vm.data,\"listenScroll\":true,\"probeType\":3,\"beforeScroll\":true},on:{\"scrolling\":_vm.dealScroll,\"beforescroll\":_vm.showShorcut}},[_c('div',_vm._l((_vm.data),function(singers){return _c('div',{key:singers.index,ref:\"listGroup\",refInFor:true,staticClass:\"singer-group\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.getGroupTitle(singers.index)))]),_vm._v(\" \"),_c('ul',_vm._l((singers.singerlist),function(singer){return _c('li',{key:singer.id,staticClass:\"item\",on:{\"click\":function($event){_vm.selectedSinger(singer)}}},[_c('div',{staticClass:\"img\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(singer.singer_pic),expression:\"singer.singer_pic\"}],key:singer.singer_id})]),_vm._v(\" \"),_c('p',{staticClass:\"name\"},[_vm._v(\" \\n                            \"+_vm._s(singer.singer_name)+\"\\n                        \")])])}))])}))]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"list-shorcut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shorcutShow),expression:\"shorcutShow\"}],staticClass:\"list-shorcut\"},[_c('ul',_vm._l((_vm.tags),function(curt,index){return _c('li',{key:index,class:{'item-active': _vm.anchorIndex === index},attrs:{\"data-index\":index},on:{\"touchstart\":function($event){$event.stopPropagation();$event.preventDefault();_vm.handleTagTouchstart(index, $event)},\"touchmove\":function($event){$event.stopPropagation();$event.preventDefault();_vm.handleTagTouchmove(index, $event)},\"touchend\":function($event){_vm.handleTagTouchend(index)}}},[_vm._v(\"\\n                    \"+_vm._s(_vm._f(\"shortcut\")(curt.name))+\"\\n                \")])})),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.floatTagShow),expression:\"floatTagShow\"}],ref:\"floattag\",staticClass:\"floattag\"},[_vm._v(_vm._s(_vm._f(\"shortcut\")(_vm.floatTag)))])])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.listScrollY < 0),expression:\"listScrollY < 0\"}],ref:\"fixtag\",staticClass:\"fix-top\"},[_vm._v(_vm._s(_vm.floatTag))])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2db269d2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/singerlist/singerlist.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2db269d2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singerlist.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singerlist.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singerlist.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2db269d2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singerlist.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2db269d2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/singerlist/singerlist.vue\n// module id = null\n// module chunks = ","import SingerList from './singerlist'\r\nexport default SingerList\n\n\n// WEBPACK FOOTER //\n// ./src/components/singerlist/index.js","<template>\r\n    <div class=\"singer\">\r\n        <div class=\"tags\">\r\n            <Taglist :data=\"tags.area\" @onselecttag=\"selectTag('area', $event)\"></Taglist>\r\n            <Taglist :data=\"tags.genre\" @onselecttag=\"selectTag('genre', $event)\"></Taglist>\r\n            <Taglist :data=\"tags.sex\" @onselecttag=\"selectTag('sex', $event)\"></Taglist>\r\n        </div>\r\n        <div class=\"list-wrapper\" ref=\"singerlistWrapper\">\r\n            <Loading v-show=\"!singers.length\" />\r\n            <SingerList :data=\"singers\" :tags=\"tags.index\" @singerdetail='singerDetail'></SingerList>\r\n        </div>\r\n        <router-view></router-view>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Loading from '_c/loading'\r\nimport Taglist from '_c/taglist'\r\nimport SingerList from '_c/singerlist'\r\nimport { getSingerList } from '@/api/singer'\r\nimport { mapMutations } from 'vuex'\r\nimport { playlistMixin } from '@/mixin'\r\n\r\nexport default {\r\n    mixins: [playlistMixin],\r\n    data(){\r\n        return {\r\n            singers: [],\r\n            tags: [],\r\n            cur_tag: {\r\n                area: -100,\r\n                genre: -100,\r\n                sex: -100,\r\n                index: -100\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        this.getSingerListData()\r\n    },\r\n    methods:{\r\n        async getSingerListData () {\r\n            let hotSinger = await getSingerList({ page: 1 })\r\n            this.tags = hotSinger.tags\r\n            this.singers = [hotSinger]\r\n            // 载入缓存的singer数据\r\n            if(!window.localStorage.singers){\r\n                let data = await getSingerList({ page: 1, all: true })\r\n                let singerString =  JSON.stringify(data)\r\n                data.unshift(hotSinger)\r\n                this.singers = data\r\n                window.localStorage.singers = singerString\r\n            }else{\r\n                let singers = JSON.parse(window.localStorage.singers)\r\n                singers.unshift(hotSinger)\r\n                this.singers = singers\r\n            }\r\n        },\r\n        async selectTag (type, e) {\r\n            this.cur_tag[type] = e.tagId\r\n            let selectSinger = await getSingerList(Object.assign(this.cur_tag, { page:1, index:-100 }))\r\n            this.singers.shift()\r\n            this.singers.unshift(selectSinger)\r\n        },\r\n        singerDetail (singer) {\r\n            this.SET_SINGER(singer)\r\n            this.$router.push({\r\n                path: `/singer/${singer.singer_mid}`\r\n            })\r\n        },\r\n        handlePlaylist () {\r\n            if (this.playlistLength) {\r\n                this.$refs.singerlistWrapper.style.bottom = '3rem'\r\n            } else {\r\n                this.$refs.singerlistWrapper.style.bottom = ''\r\n            }\r\n        },\r\n        ...mapMutations(['SET_SINGER'])\r\n    },\r\n    components: {\r\n        Loading, Taglist, SingerList\r\n    },\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.singer{\r\n    position: fixed;  width:100%;\r\n    top: 0;bottom: 3rem;\r\n    .tags{\r\n        margin: 0.3rem;\r\n        font-size: 16px;\r\n    }\r\n    .list-wrapper{\r\n        position: absolute;\r\n        top: 94px;bottom: 0;\r\n        width: 100%;\r\n    }\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/singer/singer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"singer\"},[_c('div',{staticClass:\"tags\"},[_c('Taglist',{attrs:{\"data\":_vm.tags.area},on:{\"onselecttag\":function($event){_vm.selectTag('area', $event)}}}),_vm._v(\" \"),_c('Taglist',{attrs:{\"data\":_vm.tags.genre},on:{\"onselecttag\":function($event){_vm.selectTag('genre', $event)}}}),_vm._v(\" \"),_c('Taglist',{attrs:{\"data\":_vm.tags.sex},on:{\"onselecttag\":function($event){_vm.selectTag('sex', $event)}}})],1),_vm._v(\" \"),_c('div',{ref:\"singerlistWrapper\",staticClass:\"list-wrapper\"},[_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.singers.length),expression:\"!singers.length\"}]}),_vm._v(\" \"),_c('SingerList',{attrs:{\"data\":_vm.singers,\"tags\":_vm.tags.index},on:{\"singerdetail\":_vm.singerDetail}})],1),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e06c56a0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/singer/singer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e06c56a0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./singer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./singer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e06c56a0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./singer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e06c56a0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/singer/singer.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}