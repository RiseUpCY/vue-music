webpackJsonp([5],{GSpQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Xxa5"),a=s.n(r),i=s("exGp"),o=s.n(i),n=s("Dd8w"),c=s.n(n),h=s("5b1l"),l=s("bqM4"),u=s("196n"),y=s("kaUw"),f=s("e5RB"),v=s("8stH"),d=s("NYxO"),p={mixins:[s("is1l").a],data:function(){return{hotkeys:[],query:"",queryShow:!1,searchTimer:null}},created:function(){this.getHotKeyData()},methods:c()({setHistoryPosition:function(){var e=this.$refs.hotSearch.getBoundingClientRect();this.$refs.searchHistoryWrapper.style.top=e.height+"px",this.$refs.searchlist.refresh()},addQuery:function(e){this.$refs.searchBox.setQuery(e)},deleteHistory:function(e){this.deleteSearchHistory(e)},getHotKeyData:function(){var e=this;return o()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.a)();case 2:s=t.sent,e.hotkeys=s.hotkey.slice(0,10);case 4:case"end":return t.stop()}},t,e)}))()},queryChange:function(e){var t=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){e?(t.query=e,t.queryShow=!0):t.queryShow=!1},200)},clearConfirm:function(){this.$refs.confirm.show()},listStartScroll:function(){this.$refs.searchBox.blur()},saveSearch:function(){this.saveSearchHistory(this.query)},handlePlaylist:function(e){this.playlistLength?this.$refs.searchHistoryWrapper.style.bottom="3rem":this.$refs.searchHistoryWrapper.style.bottom="",this.$refs.searchlist.refresh()}},Object(d.b)(["saveSearchHistory","deleteSearchHistory","clearSearchHistory"])),watch:{queryShow:function(){},hotkeys:function(e){var t=this;e.length&&this.$nextTick(function(){t.setHistoryPosition()})}},computed:c()({},Object(d.c)(["searchHistory"])),components:{SearchBox:h.a,Suggest:y.a,SearchList:l.a,Confirm:u.a,Loading:f.a}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"search",staticClass:"search"},[s("div",{staticClass:"search-box-wrapper"},[s("SearchBox",{ref:"searchBox",on:{query:e.queryChange}})],1),e._v(" "),s("transition-group",{attrs:{name:"result-bar"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.queryShow,expression:"!queryShow"}],key:1,staticClass:"search-wrapper"},[s("div",{ref:"hotSearch",staticClass:"hot-search"},[s("h4",[e._v("热门搜索")]),e._v(" "),s("ul",{staticStyle:{height:"100%",width:"100%"}},e._l(e.hotkeys,function(t,r){return s("li",{key:r,staticClass:"key-item",on:{click:function(s){e.addQuery(t.k)}}},[e._v("\n                        "+e._s(t.k)+"\n                    ")])})),e._v(" "),s("Loading",{directives:[{name:"show",rawName:"v-show",value:!e.hotkeys.length,expression:"!hotkeys.length"}],attrs:{mini:!0}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchHistory.length,expression:"searchHistory.length"}],ref:"searchHistoryWrapper",staticClass:"search-history"},[s("ul",[s("li",{staticClass:"history-title"},[s("p",{staticClass:"text"},[e._v("搜索历史")]),e._v(" "),s("span",{staticClass:"iconfont icon-lajitong",on:{click:e.clearConfirm}})]),e._v(" "),s("SearchList",{ref:"searchlist",attrs:{dataList:e.searchHistory},on:{selected:e.addQuery,deleted:e.deleteHistory}})],1)])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.queryShow,expression:"queryShow"}],key:2,staticClass:"search-result"},[s("Suggest",{attrs:{query:e.query},on:{beforescroll:e.listStartScroll,selected:e.saveSearch}})],1)]),e._v(" "),s("Confirm",{ref:"confirm",on:{confirm:e.clearSearchHistory}})],1)},staticRenderFns:[]};var w=s("VU/8")(p,m,!1,function(e){s("UXHA")},"data-v-fffc8bbe",null);t.default=w.exports},UXHA:function(e,t){}});
//# sourceMappingURL=5.e28a6195bdf45a52fb6f.js.map