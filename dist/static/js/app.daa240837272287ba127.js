webpackJsonp([9],{"196n":function(t,e,n){"use strict";var i={props:{text:{type:String,default:"是否要清空历史"},confirmText:{type:String,default:"清空"},cancelText:{type:String,default:"取消"}},data:function(){return{showConfirm:!1}},methods:{show:function(){this.showConfirm=!0},hide:function(){this.showConfirm=!1},confirm:function(){this.hide(),this.$emit("confirm")},cancel:function(){this.hide(),this.$emit("cancel")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"confirm-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showConfirm,expression:"showConfirm"}],staticClass:"confirm",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"confirm-wrapper"},[n("div",{staticClass:"confirm-content"},[n("p",{staticClass:"text"},[t._v(t._s(t.text))]),t._v(" "),n("div",{staticClass:"operator"},[n("div",{staticClass:"btn left",on:{click:t.confirm}},[t._v(t._s(t.confirmText))]),t._v(" "),n("div",{staticClass:"btn",on:{click:t.cancel}},[t._v(t._s(t.cancelText))])])])])])])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("vZ6m")},"data-v-49495e0e",null).exports;e.a=r},"1jO5":function(t,e){},"422T":function(t,e){},"51rG":function(t,e){},"5b1l":function(t,e,n){"use strict";var i={props:{placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},methods:{clearBox:function(){this.query=""},setQuery:function(t){this.query=t},blur:function(){"box"===document.activeElement.className&&this.$refs.query.blur()}},watch:{query:function(t){this.$emit("query",t)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-box"},[n("span",{staticClass:"iconfont icon-soushuo"}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"query",staticClass:"box",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),n("span",{class:["iconfont","icon-quxiao",{nocancel:!t.query}],on:{click:t.clearBox}})])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("f//3")},"data-v-241994b5",null).exports;e.a=r},"7BA1":function(t,e){},"8stH":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var i=n("//Fk"),s=n.n(i),r=n("gyMJ"),o=function(){return new s.a(function(t,e){Object(r.b)("/hotkey").then(function(e){t(e.data)},function(t){e(t)})})},a=function(t,e){return new s.a(function(n,i){Object(r.b)("/searching",{query:t,page:e}).then(function(t){n(t.data)},function(t){i(t)})})}},B6Z8:function(t,e){},IHeY:function(t,e,n){"use strict";var i=n("Vqun"),s=n("e5RB"),r={mixins:[n("is1l").a],props:{songs:{type:Array,default:function(){return[]}},rank:{type:Boolean,default:!1},more:{type:Boolean,default:!1},resetTop:{type:Boolean,default:!1}},data:function(){return{scrollY:0,transY:0,blurpx:0,scalepx:0,isLoading:!1}},mounted:function(){this.resetTop&&(this.$refs.songlist.style.top="0")},methods:{handlePlaylist:function(){this.playlistLength?this.$refs.songlist.style.bottom="3rem":this.$refs.songlist.style.bottom="",this.$refs.scrollWrapper.refresh()},getMoreSong:function(){this.isLoading=!0,this.$emit("getmore")},selectSong:function(t,e){this.$emit("selectSong",t,e)},getDesc:function(t){var e="";return t.singer.forEach(function(t,n){0===n?e=t.name:e+="/"+t.name}),e+". "+t.album},handleScroll:function(t){this.scrollY=t.y},getRankClass:function(t){return t<=2?"icon"+t:"icons"},refresh:function(){this.$refs.scrollWrapper.refresh()}},watch:{scrollY:function(t){var e=t<-220?-220:t>60?60:t;if(e!==this.transY){this.$refs.bglayer.style.transform="translate3d(0, "+e+"px, 0)",this.transY=e;var n=parseInt(e/20),i=e/200+1;this.blurpx!==n&&n<=0&&(this.blurpx=n,this.$emit("blurimg",n)),e>0&&this.scalepx!==i&&(this.scalepx=i,this.$emit("scaleimg",i))}},songs:function(){var t=this;this.isLoading=!1,this.$nextTick(function(){t.$refs.scrollWrapper.refresh()})}},components:{Scroll:i.a,Loading:s.a}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"songlist",staticClass:"songlist"},[n("div",{ref:"bglayer",staticClass:"bglayer"}),t._v(" "),n("Scroll",{ref:"scrollWrapper",staticClass:"scroll-wrapper",attrs:{data:t.songs,probeType:3,listenScroll:!0},on:{scrolling:t.handleScroll}},[n("ul",[t._l(t.songs,function(e,i){return n("li",{key:e.id,staticClass:"item",on:{click:function(n){t.selectSong(e,i)}}},[t.rank?n("div",{class:["num",t.getRankClass(i)]},[t._v(t._s(i+1))]):t._e(),t._v(" "),n("div",{staticClass:"txt"},[n("h4",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t.getDesc(e)))])])])}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:t.more&&t.songs.length,expression:"more && songs.length"}],staticClass:"item"},[n("p",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"more",on:{click:function(e){return e.stopPropagation(),t.getMoreSong(e)}}},[t._v("加载更多")]),t._v(" "),n("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],attrs:{mini:!0}})],1)],2)])],1)},staticRenderFns:[]};var a=n("VU/8")(r,o,!1,function(t){n("LN30")},"data-v-0ec6ffda",null).exports;e.a=a},IIWU:function(t,e){},IYFq:function(t,e){},LN30:function(t,e){},MGbh:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"selectPlay",function(){return qt}),n.d(i,"randomPlay",function(){return Ht}),n.d(i,"insertSong",function(){return Yt}),n.d(i,"deleteSong",function(){return Ot}),n.d(i,"deleteSongList",function(){return Ut}),n.d(i,"saveSearchHistory",function(){return Dt}),n.d(i,"deleteSearchHistory",function(){return Mt}),n.d(i,"clearSearchHistory",function(){return Bt}),n.d(i,"savePlayHistory",function(){return Wt}),n.d(i,"saveFavorite",function(){return Vt}),n.d(i,"deleteFavorite",function(){return Xt});var s={};n.d(s,"header",function(){return jt}),n.d(s,"headerback",function(){return Gt}),n.d(s,"themeImg",function(){return Qt}),n.d(s,"singer",function(){return zt}),n.d(s,"disc",function(){return Jt}),n.d(s,"toplist",function(){return Kt}),n.d(s,"playlistLength",function(){return Zt}),n.d(s,"playingState",function(){return te}),n.d(s,"fullScreen",function(){return ee}),n.d(s,"playList",function(){return ne}),n.d(s,"sequenceList",function(){return ie}),n.d(s,"mode",function(){return se}),n.d(s,"currentIndex",function(){return re}),n.d(s,"currentSong",function(){return oe}),n.d(s,"searchHistory",function(){return ae}),n.d(s,"playHistory",function(){return ce}),n.d(s,"favorite",function(){return le}),n.d(s,"vkey",function(){return ue});var r=n("/5sW"),o=n("Dd8w"),a=n.n(o),c=n("Xxa5"),l=n.n(c),u=n("exGp"),h=n.n(u),d=n("Vqun"),f={props:{percent:{type:Number,default:0}},data:function(){return{dasharray:50*Math.PI}},methods:{clickHandler:function(){this.$emit("svgclicked")}},computed:{dashoffset:function(){return(1-this.percent)*this.dasharray}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress-circle",on:{click:function(e){return e.stopPropagation(),t.clickHandler(e)}}},[n("svg",{attrs:{height:"28",width:"27",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",version:"1.1"}},[n("circle",{staticClass:"circle-all",attrs:{cx:"25",cy:"25",r:"23",stroke:"#d7f3fc","stroke-width":"4",fill:"transparent"}}),t._v(" "),n("circle",{staticClass:"circle-pro",attrs:{cx:"25",cy:"25",r:"23",stroke:"steelblue","stroke-width":"4",fill:"transparent","stroke-dasharray":t.dasharray,"stroke-dashoffset":t.dashoffset}})]),t._v(" "),t._t("default")],2)},staticRenderFns:[]};var m=n("VU/8")(f,p,!1,function(t){n("W54a")},"data-v-dabb29e6",null).exports,v={data:function(){return{initiated:!1,touch:{},newPercent:0}},props:{percent:{type:Number,default:0}},methods:{proTouchStart:function(t){this.initiated=!0,this.touch.startX=t.touches[0].pageX,this.offsetLeft=this.$refs.proAll.getBoundingClientRect().left,this.totalWidth=this.$refs.proAll.clientWidth,this.newPercent=(this.touch.startX-this.offsetLeft)/this.totalWidth,this.getProgress(this.newPercent)},proTouchMove:function(t){if(this.initiated){var e=(t.touches[0].pageX-this.offsetLeft)/this.totalWidth;this.newPercent=Math.min(1,Math.max(0,e)),this.getProgress(this.newPercent)}},proTouchEnd:function(){this.initiated=!1,this.$emit("changepercent",this.newPercent)},getProgress:function(t){var e=(100*t).toFixed(1);this.$refs.proNow.style.width=e+"%"}},watch:{percent:function(t){t>0&&!this.initiated&&this.getProgress(t)}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-bar"},[n("div",{ref:"proAll",staticClass:"progress-all",on:{touchstart:function(e){return e.preventDefault(),t.proTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.proTouchMove(e)},touchend:t.proTouchEnd}},[n("div",{ref:"proNow",staticClass:"progress-now"},[n("div",{staticClass:"progress-btn"})])])])])},staticRenderFns:[]};var y=n("VU/8")(v,g,!1,function(t){n("wGV7")},"data-v-6ed9ac31",null).exports,S={props:{precent:{type:Number,default:50}},data:function(){return{isInitialed:!1,touch:{},newPercent:50,timer:null,volbarShow:!1}},mounted:function(){this.setVolHeight(this.precent)},methods:{toggleBarShow:function(){this.volbarShow=!this.volbarShow},handleHoverBarShow:function(t){var e=this;t?clearTimeout(this.timer):this.timer=setTimeout(function(){e.volbarShow=!1},2500)},vTouchStart:function(t){this.handleHoverBarShow(!0),this.isInitialed=!0,this.touch.startY=t.touches[0].pageY,this.offsetTop=this.$refs.volAll.getBoundingClientRect().top,this.touch.heightAll=100,this.newPercent=this.touch.heightAll-(this.touch.startY-this.offsetTop),this.setVolHeight(this.newPercent)},vTouchMove:function(t){if(this.isInitialed){var e=this.touch.heightAll-(t.touches[0].pageY-this.offsetTop);e=Math.max(0,Math.min(100,e)),this.newPercent!==e&&(this.newPercent=e,this.setVolHeight(e))}},vTouchEnd:function(){this.isInitialed=!1,this.handleHoverBarShow()},setVolHeight:function(t){this.$refs.volNow.style.height=t+"%",this.$emit("volume",t)}},computed:{volumnIcon:function(){return 0===this.newPercent?"icon-shengyinjingyinmianxing":"icon-shengyinyinliangmianxing"}},watch:{volbarShow:function(t){var e=this;t&&(clearTimeout(this.timer),this.timer=setTimeout(function(){e.volbarShow=!1},2500))}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"volume"},[n("transition",{attrs:{name:"vol"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.volbarShow,expression:"volbarShow"}],staticClass:"volume-bar"},[n("div",{ref:"volAll",staticClass:"volume-all",on:{touchstart:function(e){return e.preventDefault(),t.vTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.vTouchMove(e)},touchend:t.vTouchEnd}},[n("div",{ref:"volNow",staticClass:"volume-now"},[n("div",{staticClass:"volume-btn"})])])])]),t._v(" "),n("span",{class:["iconfont",t.volumnIcon],on:{click:t.toggleBarShow}})],1)},staticRenderFns:[]};var w=n("VU/8")(S,_,!1,function(t){n("422T")},"data-v-74170be6",null).exports,T=n("196n"),E=n("NYxO"),C=0,L=1,x=2,b=function(t){for(var e,n,i=[],s=0;s<t.length;s++){i[s]=t[s];var r=(e=0,n=s,Math.floor(Math.random()*(n-e+1)+e)),o=i[s];i[s]=i[r],i[r]=o}return i};a()({},Object(E.c)(["playList","playlistLenght"]));var I={methods:{changeMode:function(){var t=(this.mode+1)%3;this.SET_PLAY_MODE(t);var e=null;e=t===x?b(this.sequenceList):this.sequenceList,this.resetCurrentIndex(e),this.SET_PLAYLIST(e)},resetCurrentIndex:function(t){var e=this,n=t.findIndex(function(t){return t.id===e.currentSong.id});this.SET_CURRENTINDEX(n)}}},P={methods:a()({},Object(E.b)(["saveSearchHistory","deleteSearchHistory"]),{queryChange:function(t){var e=this;clearTimeout(this.searchTimer),this.searchTimer=setTimeout(function(){t?(e.query=t,e.queryShow=!0):e.queryShow=!1},200)},listScroll:function(){this.$refs.searchBox.blur()},deleteHistory:function(t){this.deleteSearchHistory(t)},addQuery:function(t){this.$refs.searchBox.setQuery(t)}})},k={methods:a()({getFavIcon:function(t){return this.isFavoriteSong(t)?"icon-shoucang xihuan":"icon-shoucang1"},toggleFavState:function(t){this.isFavoriteSong(t)?this.deleteFavorite(t):this.saveFavorite(t)},isFavoriteSong:function(t){return this.favorite.findIndex(function(e){return e.id===t.id})>-1}},Object(E.b)(["saveFavorite","deleteFavorite"])),computed:a()({},Object(E.c)(["favorite"]))},$=n("IHeY"),R=n("bqM4"),N=n("kaUw"),A={props:{delay:{type:Number,default:2e3}},data:function(){return{showFlag:!1,timer:null}},methods:{show:function(){var t=this;this.showFlag=!0,clearTimeout(this.timer),this.timer=setTimeout(function(){t.showFlag=!1},this.delay)},hide:function(){this.showFlag=!1}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"toptip"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"toptip",on:{click:function(e){return e.stopPropagation(),t.hide(e)}}},[t._t("default")],2)])},staticRenderFns:[]};var q=n("VU/8")(A,F,!1,function(t){n("Qm0G")},"data-v-19ce2934",null).exports,H=n("5b1l"),Y=n("dyme"),O={mixins:[P],data:function(){return{showFlag:!1,query:"",queryShow:!1,showPlayHis:!0}},methods:a()({showToptip:function(){this.$refs.toptip.show()},switchPage:function(t){var e=this;0===t?this.showPlayHis=!0:(this.showPlayHis=!1,this.$nextTick(function(){e.$refs.searchlist.refresh()}))},refresh:function(){this.$refs.songlist.refresh()},show:function(){this.showFlag=!0},hide:function(){this.showFlag=!1},selectItem:function(){this.hide(),this.$emit("selectedsong"),this.saveSearchHistory(this.query),this.showToptip()},selectHistorySong:function(t,e){0!==e&&(this.insertSong(t),this.showToptip())}},Object(E.b)(["insertSong"])),computed:a()({},Object(E.c)(["playHistory","searchHistory"])),components:{SearchBox:H.a,Suggest:N.a,Switches:Y.a,Songlist:$.a,SearchList:R.a,Toptip:q}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"addsong"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"add-song",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"header"},[n("span",{staticClass:"iconfont icon-cha",on:{click:t.hide}}),t._v(" "),n("p",{staticClass:"title"},[t._v("添加歌曲到列表")])]),t._v(" "),n("div",{staticClass:"search-box-wrapper"},[n("SearchBox",{ref:"searchBox",attrs:{placeholder:"收索歌曲"},on:{query:t.queryChange}})],1),t._v(" "),n("Switches",{directives:[{name:"show",rawName:"v-show",value:!t.queryShow,expression:"!queryShow"}],staticClass:"toggle",attrs:{datas:["最近播放","搜索历史"]},on:{switch:t.switchPage}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.queryShow,expression:"!queryShow"}],staticClass:"shortcut"},[n("transition-group",{attrs:{name:"slide-in"}},[n("Songlist",{directives:[{name:"show",rawName:"v-show",value:t.showPlayHis,expression:"showPlayHis"}],key:1,ref:"songlist",attrs:{songs:t.playHistory,music:!1,resetTop:!0},on:{selectSong:t.selectHistorySong}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showPlayHis,expression:"!showPlayHis"}],key:2,staticClass:"searchlist"},[n("SearchList",{ref:"searchlist",attrs:{dataList:t.searchHistory,addSong:!0},on:{deleted:t.deleteHistory,selected:t.addQuery}})],1)],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.query&&t.queryShow,expression:"query && queryShow"}],staticClass:"search"},[n("Suggest",{attrs:{query:t.query,addSong:!0,showSinger:!1},on:{selected:t.selectItem,listScroll:t.listScroll}})],1),t._v(" "),n("Toptip",{ref:"toptip"},[n("div",{staticClass:"top-tip",staticStyle:{display:"flex","align-items":"center","justify-content":"center"}},[n("span",{staticClass:"iconfont icon-dui",staticStyle:{padding:"0 .3rem"}}),t._v(" "),n("p",{staticClass:"text"},[t._v("歌曲已添加到列表")])])])],1)])},staticRenderFns:[]};var D=n("VU/8")(O,U,!1,function(t){n("51rG")},"data-v-28fba42d",null).exports,M={mixins:[I,k],data:function(){return{showFlag:!1}},methods:a()({addSong:function(){var t=this;this.$refs.addsong.show(),this.$nextTick(function(){t.$refs.addsong.refresh()})},deleteAll:function(){this.deleteSongList(),this.hide()},confrimDelAll:function(){this.$refs.confirm.show()},deleteOne:function(t){this.deleteSong(t),this.playList.length||this.hide()},scrollToCurrentEl:function(t){var e=this.sequenceList.findIndex(function(e){return e.id===t.id});this.$refs.scroll.scrollToElement(this.$refs.songsList[e],300)},selectItem:function(t,e){this.mode===x&&(e=this.playList.findIndex(function(e){return e.id===t.id})),this.setCurrentIndex(e),this.setPlayState(!0)},show:function(){var t=this;this.showFlag=!0,this.$nextTick(function(){t.$refs.scroll.refresh()})},hide:function(){this.showFlag=!1},isCurrentSong:function(t){return this.currentSong.id===t.id}},Object(E.d)({setCurrentIndex:"SET_CURRENTINDEX",setPlayState:"SET_PLAYING_STATE",SET_PLAY_MODE:"SET_PLAY_MODE",SET_CURRENTINDEX:"SET_CURRENTINDEX",SET_PLAYLIST:"SET_PLAYLIST"}),Object(E.b)(["deleteSong","deleteSongList"])),computed:a()({},Object(E.c)(["sequenceList","currentSong","mode","playList"]),{getModeTxt:function(){switch(this.mode){case C:return"队列播放";case L:return"单曲循环";case x:return"随机播放"}},getModeIcon:function(){switch(this.mode){case C:return"icon-ttpodicon2";case L:return"icon-danquxunhuan";case x:return"icon-icon-test"}}}),watch:{currentSong:function(t,e){this.showFlag&&(this.newSong&&this.oldSong.id&&this.newSong.id!==this.oldSong.id||this.scrollToCurrentEl(t))}},components:{Scroll:d.a,Confirm:T.a,AddSong:D}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"playlist-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"playlist",on:{click:t.hide}},[n("div",{ref:"listWrap",staticClass:"list-wrapper",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"list-header"},[n("span",{class:["iconfont",t.getModeIcon],on:{click:function(e){return e.stopPropagation(),t.changeMode(e)}}}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(t.getModeTxt))]),t._v(" "),n("span",{staticClass:"iconfont icon-lajitong",on:{click:function(e){return e.stopPropagation(),t.confrimDelAll(e)}}})]),t._v(" "),n("div",{staticClass:"list-content"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.sequenceList}},[n("transition-group",{attrs:{name:"list",tag:"ul"}},t._l(t.sequenceList,function(e,i){return n("li",{key:e.id,ref:"songsList",refInFor:!0,staticClass:"item",on:{click:function(n){t.selectItem(e,i)}}},[n("span",{class:["iconfont","icon-yinle",{currentIcon:t.isCurrentSong(e)}]}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(e.name))]),t._v(" "),n("span",{class:["iconfont",t.getFavIcon(e)],on:{click:function(n){n.stopPropagation(),t.toggleFavState(e)}}}),t._v(" "),n("span",{staticClass:"iconfont icon-cha",on:{click:function(n){n.stopPropagation(),t.deleteOne(e)}}})])}))],1)],1),t._v(" "),n("div",{staticClass:"list-operator"},[n("div",{staticClass:"add",on:{click:function(e){return e.stopPropagation(),t.addSong(e)}}},[n("span",{staticClass:"iconfont icon-yinle"}),t._v(" "),n("span",[t._v("添加歌曲到队列")])])]),t._v(" "),n("div",{staticClass:"close",on:{click:t.hide}},[n("span",[t._v("关闭")])])]),t._v(" "),n("Confirm",{ref:"confirm",attrs:{text:"是否清空播放列表"},on:{confirm:t.deleteAll}}),t._v(" "),n("AddSong",{ref:"addsong",on:{selectedsong:t.hide}})],1)])},staticRenderFns:[]};var W=n("VU/8")(M,B,!1,function(t){n("MGbh")},"data-v-703b23fa",null).exports,V=n("//Fk"),X=n.n(V),j=n("gyMJ"),G=function(t){return new X.a(function(e,n){Object(j.b)("/lyric",{mid:t}).then(function(t){e(t.data)},function(t){n(t)})})},Q=n("OKJt"),z=n.n(Q),J={mixins:[k],data:function(){return{songReady:!1,currentTime:0,currentLyric:{},currentLrcLine:0,lycPageShow:!1,touch:{},volumnIcon:"icon-shengyinyinliangmianxing"}},methods:a()({changeVolume:function(t){this.$refs.audio&&(t=Math.max(0,Math.min(100,t/100)),this.$refs.audio.volume=t)},midStartTouch:function(t){this.touch.initaited=!0;var e=t.touches[0];this.touch.startX=e.pageX,this.touch.startY=e.pageY},midTouchMove:function(t){if(this.touch.initaited){var e=t.touches[0],n=e.pageX-this.touch.startX,i=e.pageY-this.touch.startY;Math.abs(i)>Math.abs(n)||(!this.lycPageShow&&n<0&&(this.transPage(n),this.touch.deltaX=n),this.lycPageShow&&n>0&&(this.transPage(n-window.innerWidth),this.touch.deltaX=n))}},midEndTouch:function(){this.touch.initaited=!1,this.touch.deltaX<-window.innerWidth/3?(this.lycPageShow=!0,this.transPage(-window.innerWidth,!0)):this.touch.deltaX<0&&this.transPage(0,!0),this.touch.deltaX>window.innerWidth/3?(this.lycPageShow=!1,this.transPage(0,!0)):this.touch.deltaX>0&&this.transPage(-window.innerWidth,!0)},transPage:function(t,e){e||(this.$refs.midLeft.style.transition="",this.$refs.midRight.style.transition=""),this.$refs.midLeft.style.transform="translateX("+t+"px)",this.$refs.midRight.style.transform="translateX("+t+"px)",e&&(this.$refs.midLeft.style.transition="all .5s",this.$refs.midRight.style.transition="all .5s")},getLrc:function(){var t=this;return h()(l.a.mark(function e(){var n,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t.currentSong.mid);case 2:if(n=e.sent,i=t.currentSong.name.replace(/\(.+\)/g,""),new RegExp("ti:"+i).test(n)){e.next=9;break}return t.currentLyric={lines:[{time:0,txt:"此歌曲为没有填词的纯音乐，请您欣赏"}]},t.currentLrcLine=0,e.abrupt("return");case 9:n&&(t.currentLyric=new z.a(n,t.handlerLyric)),t.playingState&&t.currentLyric.play();case 11:case"end":return e.stop()}},e,t)}))()},handlerLyric:function(t){var e=t.lineNum;t.txt;if(this.currentLrcLine=e,e>5){var n=this.$refs.lyricEles[e-5];this.$refs.lyricScroll&&this.$refs.lyricScroll.scrollToElement(n,1e3)}else this.$refs.lyricScroll.scrollTo(0,0,1e3)},changeMode:function(){var t=(this.mode+1)%3;this.SET_PLAY_MODE(t);var e=null;e=t===x?b(this.sequenceList):this.sequenceList,this.resetCurrentIndex(e),this.SET_PLAYLIST(e)},resetCurrentIndex:function(t){var e=this,n=t.findIndex(function(t){return t.id===e.currentSong.id});this.SET_CURRENTINDEX(n)},changeProgress:function(t){var e=t*this.currentSong.duration;this.$refs.audio.currentTime=e,this.currentLyric.seek&&this.currentLyric.seek(1e3*e),this.playingState||this.toggleState()},nextSong:function(){if(this.songReady)if(1===this.playList.length)this.loop();else{var t=this.currentIndex+1;t===this.playList.length&&(t=0),this.SET_CURRENTINDEX(t),this.playingState||this.toggleState(),this.songReady=!1}},prevSong:function(){if(this.songReady)if(1===this.playList.length)this.loop();else{var t=this.currentIndex-1;-1===t&&(t=this.playList.length-1),this.SET_CURRENTINDEX(t),this.playingState||this.toggleState(),this.songReady=!1}},toggleState:function(){if(!this.songReady)return this.$refs.audio.load(),this.SET_PLAYING_STATE(!1),void(this.currentLyric.seek&&(this.currentLyric.seek(0),this.currentLyric.togglePlay()));this.SET_PLAYING_STATE(!this.playingState),this.currentLyric.togglePlay&&this.currentLyric.togglePlay()},end:function(){this.mode===L?this.loop():this.nextSong()},error:function(){},ready:function(){this.songReady=!0,this.savePlayHistory(this.currentSong)},loop:function(){this.$refs.audio.currentTime=0,this.$refs.audio.play(),this.currentLyric.seek&&this.currentLyric.seek(0)},timeUpdate:function(t){this.currentTime=t.target.currentTime},pickUpPlayer:function(){this.SET_FULLSCREEN(!1)},unfoldPlayer:function(){this.SET_FULLSCREEN(!0)},enter:function(t,e){if(t.addEventListener("transitionend",e),!this.flag)return this.position=this.getPosAndScale(),this.flag=!0,this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(0.2)",void(this.$refs.cdWrapper.style.opacity="0");this.$refs.cdWrapper.style.transform="translate3d("+this.position.offsetX+"px, "+this.position.offsetY+"px, 0) scale("+this.position.scale+")"},afterEnter:function(){this.$refs.cdWrapper.style.transition="all .5s",this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(1)",this.$refs.cdWrapper.style.opacity="1"},beforeLeave:function(){this.$refs.cdWrapper.style.transform="translate3d(0,0, 0) scale(1)"},leave:function(t,e){t.addEventListener("transitionend",e);var n=this.position,i=n.offsetX,s=n.offsetY,r=n.scale;i&&s&&r&&(this.$refs.cdWrapper.style.transform="translate3d("+this.position.offsetX+"px, "+this.position.offsetY+"px, 0) scale("+this.position.scale+")")},getPosAndScale:function(){var t=this.$refs.miniImg.getBoundingClientRect(),e=this.$refs.cdWrapper.getBoundingClientRect(),n=t.width/e.width;return{offsetX:(t.left+t.right)/2-(e.left+e.right)/2,offsetY:(t.top+t.bottom)/2-(e.top+e.bottom)/2,scale:n}},showPlaylist:function(){this.$refs.playlist.show()}},Object(E.d)(["SET_FULLSCREEN","SET_PLAYING_STATE","SET_CURRENTINDEX","SET_PLAY_MODE","SET_PLAYLIST"]),Object(E.b)(["savePlayHistory"])),computed:a()({},Object(E.c)(["playList","fullScreen","currentSong","playingState","currentIndex","mode","sequenceList","vkey"]),{modeIconStyle:function(){var t="";switch(this.mode){case C:t="icon-liebiaoxunhuan";break;case L:t="icon-danquxunhuan";break;case x:t="icon-icon-test"}return t},playIconStyle:function(){return this.playingState?"icon-bofang":"icon-zanting"},rotateState:function(){return this.playingState?"playing":"playing pause"},isSongReadyClass:function(){return this.songReady?"":"disable"},curPercent:function(){return this.currentTime/this.currentSong.duration},curSongUrl:function(){var t=this;return this.currentSong.url?this.currentSong.url.replace(/vkey=([^&]+)&/,function(e,n){return"vkey="+t.vkey+"&"}):""}}),filters:{singer:function(t){if(t){var e="";return t.forEach(function(t,n){0===n?e=t.name:e+="/"+t.name}),e}},toDuration:function(t){var e=parseInt(t/60),n=parseInt(t%60);return e+":"+parseInt(n/10)+parseInt(n%10)},miniLyric:function(t,e){if(t)return t.length?t[e]&&t[e].txt:"此歌曲为没有填词的纯音乐，请您欣赏"}},watch:{currentSong:function(t,e){var n=this;t.id!==e.id&&(this.currentLyric.stop&&this.currentLyric.stop(),this.$nextTick(function(){n.$refs.audio.play(),n.getLrc()}))},playingState:function(t){var e=this;this.$nextTick(function(){var n=e.$refs.audio;t?n.play():n.pause()})}},components:{Progressbar:y,ProgressCircle:m,Scroll:d.a,Playlist:W,Volume:w}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.playList.length>0,expression:"playList.length > 0"}],staticClass:"player"},[n("transition",{attrs:{name:"normal-player"},on:{enter:t.enter,"after-enter":t.afterEnter,"before-leave":t.beforeLeave,leave:t.leave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.fullScreen,expression:"fullScreen"}],staticClass:"normal-player"},[n("div",{staticClass:"background"},[n("img",{attrs:{src:t.currentSong.image,width:"100%",height:"100%"}})]),t._v(" "),n("div",{staticClass:"top"},[n("span",{staticClass:"iconfont icon-down-trangle",on:{click:t.pickUpPlayer}}),t._v(" "),n("div",{staticClass:"title-wrapper"},[n("h3",{staticClass:"title"},[t._v(t._s(t.currentSong.name))])]),t._v(" "),n("p",{staticClass:"subtitle"},[t._v(t._s(t._f("singer")(t.currentSong.singer)))])]),t._v(" "),n("div",{staticClass:"middle",on:{touchstart:t.midStartTouch,touchmove:t.midTouchMove,touchend:t.midEndTouch}},[n("div",{ref:"midLeft",staticClass:"middle-left"},[n("div",{ref:"cdWrapper",staticClass:"cd-wrapper"},[n("div",{class:["cd",t.rotateState]},[n("img",{attrs:{src:t.currentSong.image}})])]),t._v(" "),n("div",{staticClass:"mini-lyric-wrapper"},[n("p",{staticClass:"lyric-txt"},[t._v(t._s(t._f("miniLyric")(t.currentLyric.lines,t.currentLrcLine)))])])]),t._v(" "),n("div",{ref:"midRight",staticClass:"middle-right"},[n("Scroll",{ref:"lyricScroll",staticClass:"lyric-wrapper",attrs:{data:t.currentLyric&&t.currentLyric.lines}},[n("div",{staticClass:"current-lyric"},t._l(t.currentLyric.lines,function(e,i){return n("p",{key:e.time,ref:"lyricEles",refInFor:!0,class:["lyric-line",{"active-lrc":t.currentLrcLine===i}]},[t._v("\n                                "+t._s(e.txt)+"\n                            ")])}))])],1)]),t._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"vocie-wrapper"},[n("Volume",{on:{volume:t.changeVolume}})],1),t._v(" "),n("div",{staticClass:"dot-wrapper"},[n("div",{class:["dot",{"dot-active":!t.lycPageShow}]}),t._v(" "),n("div",{class:["dot",{"dot-active":t.lycPageShow}]})]),t._v(" "),n("div",{staticClass:"progress-wrapper"},[n("span",{staticClass:"time"},[t._v(t._s(t._f("toDuration")(t.currentTime)))]),t._v(" "),n("div",{staticClass:"progress-content"},[n("Progressbar",{attrs:{percent:t.curPercent},on:{changepercent:t.changeProgress}})],1),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t._f("toDuration")(t.currentSong.duration)))])]),t._v(" "),n("div",{staticClass:"operators"},[n("div",{on:{click:t.changeMode}},[n("span",{class:["iconfont",t.modeIconStyle]})]),t._v(" "),n("div",{class:t.isSongReadyClass,on:{click:t.prevSong}},[n("span",{staticClass:"iconfont icon-kuaitui"})]),t._v(" "),n("div",[n("span",{class:["iconfont",t.playIconStyle,t.isSongReadyClass],on:{click:t.toggleState}})]),t._v(" "),n("div",{class:t.isSongReadyClass,on:{click:t.nextSong}},[n("span",{staticClass:"iconfont icon-kuaijin"})]),t._v(" "),n("div",[n("span",{class:["iconfont",t.getFavIcon(t.currentSong)],on:{click:function(e){t.toggleFavState(t.currentSong)}}})])])])])]),t._v(" "),n("transition",{attrs:{name:"mini-player"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullScreen,expression:"!fullScreen"}],staticClass:"mini-player",on:{click:t.unfoldPlayer}},[n("div",{class:["icon",t.rotateState]},[n("img",{ref:"miniImg",attrs:{src:t.currentSong.image}})]),t._v(" "),n("div",{staticClass:"text"},[n("h4",{staticClass:"name"},[t._v(t._s(t.currentSong.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(t._f("singer")(t.currentSong.singer)))])]),t._v(" "),n("div",{staticClass:"controller"},[n("ProgressCircle",{attrs:{percent:t.curPercent},on:{svgclicked:t.toggleState}},[n("span",{class:["iconfont iconplay",t.playIconStyle],on:{click:function(e){return e.stopPropagation(),t.toggleState(e)}}})]),t._v(" "),n("div",{staticClass:"sequence-list",on:{click:function(e){return e.stopPropagation(),t.showPlaylist(e)}}},[n("span",{staticClass:"iconfont icon-bofangliebiao"})])],1)])]),t._v(" "),n("audio",{ref:"audio",attrs:{src:t.curSongUrl},on:{canplay:t.ready,error:t.error,timeupdate:t.timeUpdate,ended:t.end}}),t._v(" "),n("Playlist",{ref:"playlist"})],1)},staticRenderFns:[]};var Z=n("VU/8")(J,K,!1,function(t){n("IIWU")},"data-v-329fffca",null).exports,tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},t._l(t.navData,function(e,i){return n("router-link",{key:i,attrs:{to:{name:e.toName},tag:"div"}},[n("span",{class:["iconfont",e.icon]}),t._v(" "),n("span",[t._v(t._s(e.title))])])}))},staticRenderFns:[]};var et={name:"App",components:{Footer:n("VU/8")({data:function(){return{navData:[{icon:"icon-yinle",title:"推荐",toName:"recommend"},{icon:"icon-geshou",title:"歌手",toName:"singer"},{icon:"icon-paixing",title:"排行",toName:"rank"},{icon:"icon-faxian",title:"搜索",toName:"search"},{icon:"icon-mo",title:"用户",toName:"user"}]}},methods:{}},tt,!1,function(t){n("1jO5")},"data-v-2f7b0463",null).exports,Player:Z},mounted:function(){var t=this;this.$get("/vkey").then(function(e){e.data.replace(/\(({.+})\)/,function(e,n){var i=JSON.parse(n).req.data.vkey;t.SET_VKEY(i)})})},methods:a()({},Object(E.d)(["SET_VKEY"]))},nt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container"},[e("transition",{attrs:{name:"router-toggle"}},[e("keep-alive",[e("router-view")],1)],1)],1),this._v(" "),e("Footer"),this._v(" "),e("Player")],1)},staticRenderFns:[]};var it=n("VU/8")(et,nt,!1,function(t){n("Tq2H")},"data-v-8ce31b66",null).exports,st=n("/ocq"),rt=n("e5RB"),ot=n("GQaK"),at={props:{loop:{type:Boolean,default:!0},interval:{type:Number,default:4e3}},data:function(){return{dots:[],currentIndex:0,timer:null}},mounted:function(){var t=this;this.initWidth(),this.initDots(),this.initSlider(),this.handleAutoplay(),window.addEventListener("resize",function(){t.initWidth(!0),t.slider.refresh()})},methods:{initWidth:function(t){var e=0,n=this.$refs.sliderWrapper.clientWidth;this.children=this.$refs.imgWrapper.children;for(var i=0;i<this.children.length;i++){var s=this.children[i];s.style.width=n+"px",s.classList.add("slider-item"),e+=n}this.loop&&!t&&(e+=2*n),this.$refs.imgWrapper.style.width=e+"px"},initDots:function(){this.dots=new Array(this.children.length)},initSlider:function(){var t=this;this.slider=new ot.a(this.$refs.sliderWrapper,{click:!0,scrollX:!0,scrollY:!1,momentum:!1,snap:{loop:this.loop,threshold:.3,speed:400}}),this.slider.on("scrollEnd",function(){var e=t.slider.getCurrentPage();t.currentIndex=e.pageX,t.handleAutoplay()})},handleAutoplay:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.currentIndex=t.currentIndex<t.children.length-3?t.currentIndex+1:0,t.slider.goToPage(t.currentIndex,0,400)},this.interval)},destroyed:function(){clearTimeout(this.timer)}}},ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"slider"},[n("div",{ref:"sliderWrapper",staticClass:"slider-wrapper"},[n("div",{ref:"imgWrapper",staticClass:"img-wrapper"},[t._t("default")],2)]),t._v(" "),n("div",{staticClass:"dots"},t._l(t.dots,function(e,i){return n("span",{key:i,class:["dot",{"dot-active":t.currentIndex===i}]})}))])},staticRenderFns:[]};var lt=n("VU/8")(at,ct,!1,function(t){n("IYFq")},"data-v-3d87d137",null).exports,ut=n("m40h"),ht={mixins:[n("is1l").a],data:function(){return{sliderDatas:[],discList:[]}},methods:a()({handlePlaylist:function(){this.playlistLength?this.$refs.listScrollWrapper.style.paddingBottom="6rem":this.$refs.listScrollWrapper.style.paddingBottom="",this.$refs.scroll.refresh()},getSliderDatas:function(){var t=this;return h()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.c)();case 2:n=e.sent,t.sliderDatas=n.slider;case 4:case"end":return e.stop()}},e,t)}))()},getRecommendData:function(){var t=this;return h()(l.a.mark(function e(){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.b)();case 2:n=e.sent,t.discList=n.data.list,t.$nextTick(function(){t.changePosition()});case 5:case"end":return e.stop()}},e,t)}))()},checkablum:function(t){this.SET_DISC(t),this.$router.push({path:"/recommend/"+t.dissid})},changePosition:function(){this.$refs.recList.style.top=this.$refs.recList.offsetTop+"px",this.$refs.recList.style.position="absolute"}},Object(E.d)(["SET_DISC"])),mounted:function(){this.getSliderDatas(),this.getRecommendData()},components:{Slider:lt,Scroll:d.a,Loading:rt.a}},dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommend"},[t.sliderDatas.length?n("div",[n("Slider",t._l(t.sliderDatas,function(t){return n("div",{key:t.id},[n("a",{attrs:{href:t.linkUrl}},[n("img",{attrs:{src:t.picUrl}})])])}))],1):t._e(),t._v(" "),t.sliderDatas.length?t._e():n("div",{staticClass:"stake"}),t._v(" "),n("div",{ref:"recList",staticClass:"recommend-list"},[n("h3",{staticClass:"list-title"},[t._v("热门歌单推荐")]),t._v(" "),n("div",{ref:"listScrollWrapper",staticClass:"list-scroll-wrapper"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.discList}},[n("ul",t._l(t.discList,function(e){return n("li",{key:e.dissid,staticClass:"item",on:{click:function(n){t.checkablum(e)}}},[n("div",{staticClass:"icon"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imgurl,expression:"item.imgurl"}],attrs:{width:"60",height:"60"}})]),t._v(" "),n("div",{staticClass:"text"},[n("h4",{staticClass:"name",domProps:{innerHTML:t._s(e.creator.name)}}),t._v(" "),n("p",{staticClass:"dest",domProps:{innerHTML:t._s(e.dissname)}})])])})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.discList.length,expression:"!discList.length"}],staticClass:"loading-container"},[n("Loading")],1)])],1)]),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var ft=n("VU/8")(ht,dt,!1,function(t){n("7BA1")},"data-v-53e3d504",null).exports;r.a.use(st.a);var pt=new st.a({routes:[{path:"/",redirect:"/recommend"},{path:"/recommend",name:"recommend",component:ft,children:[{path:":id",name:"disc",component:function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,"CTeH"))}}]},{path:"/singer",name:"singer",component:function(t){return n.e(2).then(function(){var e=[n("hbgm")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",name:"SingerDetail",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("MpnG")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/rank",name:"rank",component:function(t){return n.e(3).then(function(){var e=[n("3e0L")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",name:"toplist",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){var e=[n("9Xki")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/search",name:"search",component:function(t){return n.e(5).then(function(){var e=[n("GSpQ")];t.apply(null,e)}.bind(this)).catch(n.oe)},children:[{path:":id",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){var e=[n("MpnG")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]},{path:"/user",name:"user",component:function(t){return n.e(6).then(function(){var e=[n("+L4n")];t.apply(null,e)}.bind(this)).catch(n.oe)}}]}),mt=n("mvHQ"),vt=n.n(mt),gt=n("bOdI"),yt=n.n(gt),St=n("woOf"),_t=n.n(St),wt=n("Zrlr"),Tt=n.n(wt),Et=n("wxAW"),Ct=n.n(Et),Lt=new(function(){function t(e){Tt()(this,t),this.type=e,this.searchJSON=localStorage[this.type]?JSON.parse(localStorage[this.type]):{}}return Ct()(t,[{key:"set",value:function(t,e){var n=_t()({},this.searchJSON,yt()({},t,e));localStorage[this.type]=vt()(n)}},{key:"get",value:function(t){return this.searchJSON[t]?this.searchJSON[t]:[]}}]),t}())("searchHistory"),xt="savedSearch",bt=15,It="playHistory",Pt=200,kt="favorite_list";function $t(t,e,n){var i=t.findIndex(function(t){return t.id===e.id});return i>-1&&t.splice(i,1),t.unshift(e),n&&n<t.length&&t.pop(),t}var Rt,Nt={themeImg:n("OTtn"),headerTitle:"iMusic",headerBack:{},singer:{},playing:!1,fullScreen:!1,playList:[],sequenceList:[],mode:C,currentIndex:-1,disc:{},toplist:{},searchHistory:Lt.get(xt).slice(),playHistory:Lt.get(It).slice(),favorite:Lt.get(kt).slice(),vkey:""},At=(Rt={},yt()(Rt,"SET_HEAD_TITLE",function(t,e){t.headerTitle=e}),yt()(Rt,"SET_HEAD_BACK",function(t,e){t.headerBack=e}),yt()(Rt,"SET_SINGER",function(t,e){t.singer=e}),yt()(Rt,"SET_DISC",function(t,e){t.disc=e}),yt()(Rt,"SET_TOPLIST",function(t,e){t.toplist=e}),yt()(Rt,"SET_PLAY_HISTORY",function(t,e){t.playHistory=e}),yt()(Rt,"SET_PLAYING_STATE",function(t,e){t.playing=e}),yt()(Rt,"SET_FULLSCREEN",function(t,e){t.fullScreen=e}),yt()(Rt,"SET_PLAYLIST",function(t,e){t.playList=e}),yt()(Rt,"SET_SEQUENCELIST",function(t,e){t.sequenceList=e}),yt()(Rt,"SET_PLAY_MODE",function(t,e){t.mode=e}),yt()(Rt,"SET_CURRENTINDEX",function(t,e){t.currentIndex=e}),yt()(Rt,"SET_SEARCH_HISTORY",function(t,e){t.searchHistory=e}),yt()(Rt,"SET_FAVORITE",function(t,e){t.favorite=e}),yt()(Rt,"SET_VKEY",function(t,e){t.vkey=e}),Rt);function Ft(t,e){return t.findIndex(function(t){return t.id===e.id})}var qt=function(t,e){var n=t.commit,i=t.state,s=e.list,r=e.index;if(i.mode===x){var o=b(s);r=Ft(o,s[r]),n("SET_PLAYLIST",o)}else n("SET_PLAYLIST",s);n("SET_SEQUENCELIST",s),n("SET_FULLSCREEN",!0),n("SET_PLAYING_STATE",!0),n("SET_CURRENTINDEX",r)},Ht=function(t,e){var n=t.commit,i=e.list;n("SET_PLAY_MODE",x),n("SET_SEQUENCELIST",i),n("SET_PLAYLIST",b(i)),n("SET_CURRENTINDEX",0),n("SET_FULLSCREEN",!0),n("SET_PLAYING_STATE",!0)},Yt=function(t,e){var n=t.commit,i=t.state,s=i.playList.slice(),r=i.sequenceList.slice(),o=i.currentIndex,a=s[o],c=Ft(s,e);o++,s.splice(o,0,e),c>-1&&(o>c?(s.splice(c,1),o--):s.splice(c+1,1));var l=Ft(r,a),u=Ft(r,e);r.splice(l+1,0,e),u>-1&&(l>u?r.splice(u,1):r.splice(u+1,1)),n("SET_PLAYLIST",s),n("SET_SEQUENCELIST",r),n("SET_CURRENTINDEX",o),n("SET_PLAYING_STATE",!0),n("SET_FULLSCREEN",!0)},Ot=function(t,e){var n=t.commit,i=t.state,s=i.playList.slice(),r=i.sequenceList.slice(),o=i.currentIndex,a=Ft(s,e);s.splice(a,1);var c=Ft(r,e);r.splice(c,1),(o>a||o===s.length)&&o--,n("SET_PLAYLIST",s),n("SET_SEQUENCELIST",r),n("SET_CURRENTINDEX",o),n("SET_PLAYING_STATE",s.length>0)},Ut=function(t){var e=t.commit;e("SET_PLAYLIST",[]),e("SET_SEQUENCELIST",[]),e("SET_CURRENTINDEX",-1),e("SET_PLAYING_STATE",!1)},Dt=function(t,e){var n,i,s,r,o,a,c;(0,t.commit)("SET_SEARCH_HISTORY",(n=e,a=Lt.get(xt)?Lt.get(xt):[],s=n,r=bt,(o=(i=a).findIndex(function(t){return t===s}))>-1&&i.splice(o,1),i.unshift(s),r&&r<i.length&&i.pop(),c=i,Lt.set(xt,c),c).slice())},Mt=function(t,e){(0,t.commit)("SET_SEARCH_HISTORY",function(t){var e=function(t,e){var n=t.findIndex(function(t){return t===e});return n>-1&&t.splice(n,1),t}(Lt.get(xt)?Lt.get(xt):[],t);return Lt.set(xt,e),e}(e).slice())},Bt=function(t){(0,t.commit)("SET_SEARCH_HISTORY",(Lt.set(xt,[]),[]))},Wt=function(t,e){(0,t.commit)("SET_PLAY_HISTORY",function(t){var e=$t(Lt.get(It)?Lt.get(It):[],t,Pt);return Lt.set(It,e),e}(e).slice())},Vt=function(t,e){(0,t.commit)("SET_FAVORITE",function(t){var e=Lt.get(kt)?Lt.get(kt):[],n=$t(e,t,500);return Lt.set(kt,n),console.log(e,n),n}(e).slice())},Xt=function(t,e){(0,t.commit)("SET_FAVORITE",function(t){var e=function(t,e){var n=t.findIndex(function(t){return t.id===e.id});return n>-1&&t.splice(n,1),t}(Lt.get(kt)?Lt.get(kt):[],t);return Lt.set(kt,e),e}(e).slice())},jt=function(t){return t.headerTitle},Gt=function(t){return t.headerBack},Qt=function(t){return t.themeImg},zt=function(t){return t.singer},Jt=function(t){return t.disc},Kt=function(t){return t.toplist},Zt=function(t){return t.playList.length},te=function(t){return t.playing},ee=function(t){return t.fullScreen},ne=function(t){return t.playList},ie=function(t){return t.sequenceList},se=function(t){return t.mode},re=function(t){return t.currentIndex},oe=function(t){return t.playList[t.currentIndex]||{}},ae=function(t){return t.searchHistory},ce=function(t){return t.playHistory},le=function(t){return t.favorite},ue=function(t){return t.vkey};n("sax8");r.a.use(E.a);var he=new E.a.Store({state:Nt,mutations:At,actions:i,getters:s,strict:!1,modules:{}}),de=n("cTzj"),fe=n.n(de),pe=(n("cN2K"),n("v5o6"));n.n(pe).a.attach(document.body),r.a.config.productionTip=!1,r.a.use(fe.a,{loading:n("OTtn")}),r.a.prototype.$post=j.a.postData,r.a.prototype.$get=j.a.getData,new r.a({el:"#app",router:pt,store:he,render:function(t){return t(it)}})},OTtn:function(t,e,n){t.exports=n.p+"static/img/bagua.62b511d.png"},PvFA:function(t,e,n){"use strict";e.a=function(t){return new function(t){var e=t.id,n=t.mid,i=t.singer,s=t.name,r=t.album,o=t.duration,a=t.image,c=t.url;this.id=e,this.mid=n,this.singer=i,this.name=s,this.album=r,this.duration=o,this.image=a,this.url=c}({id:t.songid,mid:t.songmid,singer:t.singer,name:t.songname,album:t.albumname,duration:t.interval,image:"//y.gtimg.cn/music/photo_new/T002R300x300M000"+t.albummid+".jpg?max_age=2592000",url:"http://dl.stream.qqmusic.qq.com/C400"+t.strMediaMid+".m4a?guid=4840101680&vkey="+i+"&uin=0&fromtag=38"})};var i="5F13D4313F26CCF73780CCE240E4AB665B30670EC691791507BCC6A9706F8DE3AFBC413358349B173226AB2C8453FA2DDBE194759F8F172A"},Qm0G:function(t,e){},RrTS:function(t,e){},Tq2H:function(t,e){},Vqun:function(t,e,n){"use strict";var i=n("GQaK"),s={props:{data:{type:Array,default:null},click:{type:Boolean,default:!0},listenScroll:{type:Boolean,default:!1},probeType:{type:Number,default:1},pullupload:{type:Boolean,default:!1},beforeScroll:{type:Boolean,default:!1}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},methods:{initScroll:function(){var t=this;this.$refs.scrollInner&&(this.scroll=new i.a(this.$refs.scrollInner,{click:this.click,probeType:this.probeType}),this.listenScroll&&this.scroll.on("scroll",function(e){t.$emit("scrolling",e)}),this.pullupload&&this.scroll.on("scrollEnd",function(){t.scroll.y<t.scroll.maxScrollY+50&&t.$emit("scrollToEnd")}),this.beforeScroll&&this.scroll.on("beforeScrollStart",function(){t.$emit("beforescroll")}))},refresh:function(){this.scroll&&this.scroll.refresh()},scrollToElement:function(){this.scroll&&this.scroll.scrollToElement.apply(this.scroll,arguments)},scrollTo:function(){this.scroll&&this.scroll.scrollTo.apply(this.scroll,arguments)},enable:function(){this.scroll&&this.scroll.enable()},disable:function(){this.scroll&&this.scroll.disable()}},watch:{data:function(){this.refresh()}}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"scrollInner"},[this._t("default")],2)},staticRenderFns:[]},o=n("VU/8")(s,r,!1,null,null,null).exports;e.a=o},W54a:function(t,e){},bqM4:function(t,e,n){"use strict";var i=n("Vqun"),s={props:{dataList:{type:Array,default:function(){return[]}}},methods:{refresh:function(){this.$refs.scroll.refresh()},selectedItem:function(t){this.$emit("selected",t)},deleteItem:function(t){this.$emit("deleted",t)}},components:{Scroll:i.a}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"searchlist",staticClass:"search-list"},[n("Scroll",{ref:"scroll",staticClass:"search-scroll-wrapper",attrs:{data:t.dataList}},[n("ul",t._l(t.dataList,function(e,i){return n("li",{key:i,staticClass:"item",on:{click:function(n){t.selectedItem(e)}}},[n("p",{staticClass:"text"},[t._v(t._s(e))]),t._v(" "),n("span",{staticClass:"iconfont icon-cha",on:{click:function(n){n.stopPropagation(),t.deleteItem(e)}}})])}))])],1)},staticRenderFns:[]};var o=n("VU/8")(s,r,!1,function(t){n("pZ6t")},"data-v-1d18174c",null).exports;e.a=o},cN2K:function(t,e){},dyme:function(t,e,n){"use strict";var i={props:{datas:{type:Array,default:function(){return[]}},index:{type:Number,default:0}},data:function(){return{currentIndex:0}},mounted:function(){this.currentIndex=this.index},methods:{selectItem:function(t){this.currentIndex=t,this.$emit("switch",t)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"switch"},t._l(t.datas,function(e,i){return n("li",{key:i,class:["item",{active:t.currentIndex===i}],on:{click:function(e){t.selectItem(i)}}},[n("span",[t._v(t._s(e))])])}))},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("xCY/")},"data-v-6bfff92c",null).exports;e.a=r},e5RB:function(t,e,n){"use strict";var i={props:{title:{type:String,default:"数据加载中..."},mini:{type:Boolean,default:!1}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return this.mini?e("div",{staticClass:"mini"},[e("img",{attrs:{src:n("zUsG"),height:"25",width:"25"}})]):e("div",{staticClass:"loading"},[e("img",{attrs:{src:n("zUsG"),height:"60",width:"60"}}),this._v(" "),e("p",{staticClass:"title"},[this._v(this._s(this.title))])])},staticRenderFns:[]};var r=n("VU/8")(i,s,!1,function(t){n("B6Z8")},"data-v-625fc6d5",null).exports;e.a=r},"f//3":function(t,e){},gyMJ:function(t,e,n){"use strict";e.b=a;var i=n("//Fk"),s=n.n(i),r=n("mtWM"),o=n.n(r);function a(t,e){return new s.a(function(n,i){var s={params:e};o.a.get(t,s).then(function(t){setTimeout(function(){n(t.data)},1e3)},function(t){i(t)})})}o.a.defaults.timeout=1e4,o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8;",o.a.defaults.baseURL="http://music.60late.com",o.a.interceptors.request.use(function(t){return t},function(t){return console.log("post error"),s.a.reject(t)}),o.a.interceptors.response.use(function(t){return t.data?t:s.a.resolve(t)},function(t){return console.log("response error"),s.a.reject(t)}),e.a={postData:function(t,e){return new s.a(function(n,i){o.a.post(t,e).then(function(t){n(t.data)},function(t){i(t)})})},getData:a}},is1l:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("Dd8w"),s=n.n(i),r=n("NYxO"),o={computed:s()({},Object(r.c)(["playList","playlistLength"])),mounted:function(){this.handlePlaylist(this.playList)},activated:function(){this.handlePlaylist(this.playList)},watch:{playList:function(t){this.handlePlaylist(t)}},methods:{handlePlaylist:function(){throw new Error("component must implement handlePlaylist method")}}}},kaUw:function(t,e,n){"use strict";var i=n("woOf"),s=n.n(i),r=n("Xxa5"),o=n.n(r),a=n("exGp"),c=n.n(a),l=n("Dd8w"),u=n.n(l),h=n("Vqun"),d=n("e5RB"),f=n("8stH"),p=n("PvFA"),m=n("NYxO"),v={props:{query:{type:String,default:""},showSinger:{type:Boolean,default:!0},showAlbum:{type:Boolean,default:!0}},data:function(){return{page:0,ismore:!0,result:[],showResult:!1}},activated:function(){this.showResult=!1},methods:u()({scrollStart:function(){this.$emit("beforescroll")},selectItem:function(t){if("singer"===t.type)this.showResult=!0,this.SET_SINGER({singer_id:t.singerid,singer_name:t.singername,singer_pic:"http://y.gtimg.cn/music/photo_new/T001R150x150M000"+t.singermid+".webp"}),this.$router.push({path:"/search/"+t.singerid});else{if("album"===t.type)return void console.log(t);this.$store.dispatch("insertSong",t)}this.$emit("selected")},searchMoreSong:function(){this.ismore&&(this.page+=1,this.getSearchResult(!0))},getSearchResult:function(t){var e=this;return c()(o.a.mark(function n(){var i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t||(e.page=1,e.ismore=!0),n.next=3,Object(f.b)(e.query,e.page);case 3:(!(i=n.sent).song.list.length||20*i.song.curpage>=i.song.totalnum)&&(e.ismore=!1),e.result=t?e.result.concat(e.formatResult(i)):e.formatResult(i,!0);case 6:case"end":return n.stop()}},n,e)}))()},formatResult:function(t,e){var n=[];return 2==t.zhida.type&&this.showSinger&&e&&n.push(u()({},t.zhida,{type:"singer"})),3==t.zhida.type&&this.showAlbum&&e&&n.push(u()({},t.zhida,{type:"album"})),t.song.curnum&&(n=n.concat(this.makeSongs(t.song.list))),n},makeSongs:function(t){var e=[];return t.forEach(function(t){t.songid&&t.albumid&&e.push(Object(p.a)(s()({},t,{strMediaMid:t.songmid})))}),e},getTxt:function(t){if("singer"===t.type)return t.singername;if("album"===t.type)return t.albumname;if(!t.type){var e="";return t.singer.forEach(function(t,n){n?e+="/"+t.name:e=t.name}),t.name+" - "+e}},getIcon:function(t){return"singer"===t?"icon-geshou":"album"===t?"icon-zhuanji":"icon-yinle"}},Object(m.d)(["SET_SINGER"])),watch:{query:function(t){this.getSearchResult()}},components:{Scroll:h.a,Loading:d.a}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"suggest"},[n("Scroll",{ref:"scroll",staticClass:"scroll-wrapper",attrs:{data:t.result,pullupload:!0,beforeScroll:!0},on:{scrollToEnd:t.searchMoreSong,beforescroll:t.scrollStart}},[n("ul",{staticClass:"seggest-list"},[t._l(t.result,function(e,i){return n("li",{key:i,staticClass:"suggest-item",on:{click:function(n){t.selectItem(e)}}},[n("span",{class:["iconfont",t.getIcon(e.type)]}),t._v(" "),n("p",{staticClass:"name",domProps:{innerHTML:t._s(t.getTxt(e))}})])}),t._v(" "),n("Loading",{directives:[{name:"show",rawName:"v-show",value:t.ismore,expression:"ismore"}],attrs:{mini:!0}}),t._v(" "),n("li",{directives:[{name:"show",rawName:"v-show",value:!t.ismore&&!this.result.length,expression:"!ismore && !this.result.length"}],staticStyle:{"text-align":"center"}},[t._v("\n                抱歉，没有搜索结果\n            ")])],2)]),t._v(" "),n("router-view",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}]})],1)},staticRenderFns:[]};var y=n("VU/8")(v,g,!1,function(t){n("RrTS")},"data-v-72728390",null).exports;e.a=y},m40h:function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return c});var i=n("//Fk"),s=n.n(i),r=n("gyMJ"),o=function(){return new s.a(function(t,e){Object(r.b)("/pageslider").then(function(e){t(e.data)},function(t){e(t)})})},a=function(){return new s.a(function(t,e){Object(r.b)("/recommend").then(function(e){t(e.data)},function(t){e(t)})})},c=function(t){return new s.a(function(e,n){Object(r.b)("/disclist",{dissid:t}).then(function(t){e(t.data)},function(t){n(t)})})}},pZ6t:function(t,e){},vZ6m:function(t,e){},wGV7:function(t,e){},"xCY/":function(t,e){},zUsG:function(t,e,n){t.exports=n.p+"static/img/loading.65a9057.gif"}},["NHnr"]);
//# sourceMappingURL=app.daa240837272287ba127.js.map